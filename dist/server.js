!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t){e.exports=require("express")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(24);t.ObjectID=u.ObjectID;var o,a="mongodb+srv://admin:admin@cluster0-dxwkg.mongodb.net/insg?retryWrites=true";function i(){return r(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,u.MongoClient.connect(a,{useNewUrlParser:!0})];case 1:return e=t.sent(),[2,o=e.db("insg")];case 2:throw t.sent(),"Database connection failed.";case 3:return[2]}})})}t.MongoDb=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:if(o)return[2,o];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,i()];case 2:return e.sent(),[2,o];case 3:throw e.sent();case 4:return[2]}})})},t.DbCollection=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:if(o)return[2,o.collection(e)];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i()];case 2:return t.sent(),[2,o.collection(e)];case 3:throw t.sent();case 4:return[2]}})})}},function(e,t){e.exports=require("axios")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.busArrivalUrl="http://datamall2.mytransport.sg/ltaodataservice/BusArrivalv2";t.busStopsUrl="http://datamall2.mytransport.sg/ltaodataservice/BusStops";var r={headers:{AccountKey:"6sVzf9zXRaCgkJUdjxIw2A=="}};t.headerConfig=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),o=n(3),a=[];function i(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=o.busStopsUrl,e&&(t+="?$skip="+e),[4,u.default.get(t,o.headerConfig)];case 1:if(200!=(n=r.sent()).status)throw{status:n.status};return[2,n.data.value];case 2:throw r.sent();case 3:return[2]}})})}function c(e){if(e)for(var t=0;t<a.length;t++)if(e===a[t].BusStopCode)return a[t]}t.busStops=a,function e(){return r(this,void 0,void 0,function(){var n,r,u;return s(this,function(s){switch(s.label){case 0:s.trys.push([0,5,,6]),n=0,r=[],s.label=1;case 1:return[4,i(n)];case 2:r=s.sent(),u=a,t.busStops=a=u.concat(r),n+=500,s.label=3;case 3:if(500===r.length)return[3,1];s.label=4;case 4:return[3,6];case 5:return s.sent(),t.busStops=a=[],e(),[3,6];case 6:return[2]}})})}(),t.checkBusStopLocally=c,t.getBusStopInfo=function(e,t){if(!e)return t.status(400).send("Invalid Bus Stop Code.");var n=c(e);return n?t.status(200).send(n):t.status(400).send("Bus Stop Info not found.")},t.getNearbyBusStops=function(e,t,n){if(void 0===e||void 0===t)return n.status(400).send("Invalid coordinates.");for(var r=[],s=0;s<a.length;s++){var u=(a[s].Latitude-e)*Math.PI/180,o=(a[s].Longitude-t)*Math.PI/180,i=Math.sin(u/2)*Math.sin(u/2)+Math.cos(a[s].Latitude*Math.PI/180)*Math.cos(e*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),c=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3;Math.abs(c)<400&&r.push(a[s])}n.status(200).send(r)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1);t.GetInventory=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,u.DbCollection("gifts-inventory")];case 1:return[4,r.sent().find().toArray()];case 2:return t=r.sent(),[2,e.status(200).send(t)];case 3:return n=r.sent(),[2,e.status(500).send(n)];case 4:return[2]}})})},t.AdjustInventory=function(e,t,n){return r(this,void 0,void 0,function(){var r,o;return s(this,function(s){switch(s.label){case 0:if(!e||!t)return[2,n.status(400).send("Invalid input.")];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,u.DbCollection("gifts-inventory")];case 2:return[4,s.sent().updateOne({_id:new u.ObjectID(e)},{$set:{modifiedOn:new Date,qty:t}},{upsert:!0})];case 3:return r=s.sent(),[2,n.status(200).send(r)];case 4:return o=s.sent(),[2,n.status(500).send(o)];case 5:return[2]}})})},t.ReserveInventory=function(e,t){return r(this,void 0,void 0,function(){var n,r,o,a;return s(this,function(s){switch(s.label){case 0:if(!t||t.length<=0)throw"The cart is empty.";s.label=1;case 1:return s.trys.push([1,7,,8]),n=[],r=[],[4,u.DbCollection("gifts-inventory")];case 2:o=s.sent(),a=0,s.label=3;case 3:return a<t.length?[4,o.updateOne({_id:new u.ObjectID(t[a].product._id),qty:{$gte:t[a].qty}},{$inc:{qty:-t[a].qty},$push:{reservations:{qty:t[a].qty,_id:new u.ObjectID(e),createdOn:new Date}}})]:[3,6];case 4:if(0===s.sent().result.nModified)return r.push(t[a].product),[3,6];n.push(t[a].product),s.label=5;case 5:return a++,[3,3];case 6:if(r.length>0){for(a=0;a<n.length;a++)o.updateOne({_id:n[a]._id,"reservations._id":e},{$inc:{qty:n[a].qty},$pull:{reservations:{_id:e}}});throw"Not enough storage."}return[2,"Success."];case 7:throw s.sent();case 8:return[2]}})})},t.DeleteInventoryReservation=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,u.DbCollection("gifts-inventory")];case 1:return[4,r.sent().updateOne({"reservations._id":new u.ObjectID(e)},{$pull:{reservations:{_id:new u.ObjectID(e)}}})];case 2:if((t=r.sent()).result.nModified<=0)throw"delete reservation failed.";return[2,t];case 3:throw n=r.sent(),console.log(n),"delete reservation failed with exception.";case 4:return[2]}})})}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},u=this;Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(7);function i(e){return!(!e||!e.user)}r(u,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,o.DbCollection("gifts-users")];case 1:return e.sent().createIndex("uid",{unique:!0}),[2]}})}),t.Login=function(e,t){return r(this,void 0,void 0,function(){var n,r;return s(this,function(s){switch(s.label){case 0:if(e.session&&e.session.user)return[2,t.status(200).send({uid:e.session.user.uid})];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,o.DbCollection("gifts-users")];case 2:return n=s.sent(),r=e.session,[4,n.findOne({uid:e.body.uid,pwd:a.encrypt(e.body.pwd)})];case 3:return r.user=s.sent(),e.session.user?[2,t.status(200).send({uid:e.session.user.uid})]:[2,t.status(403).send("Incorrect username or password")];case 4:return s.sent(),[2,t.status(500).send("server error.")];case 5:return[2]}})})},t.Logout=function(e,t){return e.session&&e.session.user&&(e.session.user=null),t.status(200).send({result:"ok"})},t.Register=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!(e.body.uid&&e.body.pwd&&e.body.email&&e.body.firstName&&e.body.lastName))return[2,t.status(400).send("Invalid input.")];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,o.DbCollection("gifts-users")];case 2:return[4,r.sent().insertOne({uid:e.body.uid,pwd:a.encrypt(e.body.pwd),email:e.body.email,firstName:e.body.firstName,lastName:e.body.lastName,createdOn:new Date})];case 3:return 1===(n=r.sent()).insertedCount?[2,t.status(200).send(n.ops[0])]:[2,t.status(500).send("Register failed. Please try again later.")];case 4:return r.sent(),[2,t.status(500).send("Register failed. Please try again later.")];case 5:return[2]}})})},t.DeleteUser=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!e||!e.user)return[2,t.status(403).send("Login is required.")];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,o.MongoDb()];case 2:return r.sent().collection("gifts-users").deleteOne({_id:e.user._id}),e.user=null,[2,t.status(200).send({result:"User deleted."})];case 3:return n=r.sent(),[2,t.status(400).send(n)];case 4:return[2]}})})},t.UserInfo=function(e,t){return i(e)?t.status(200).send({_id:e.user._id,uid:e.user.uid,email:e.user.email}):t.status(403).send("User Not login.")},t.bLogin=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(32),u="aes-192-cbc",o=s.scryptSync("inSGyc83","salt",24),a=Buffer.alloc(16,0);function i(e,t){var n="";if(e===r.String)n="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";else if(e===r.Number)n="0123456789";else{if(e!==r.Capital)return"";n="ABCDEFGHIJKLMNOPQRSTUVWXYZ"}for(var s="",u=t;u>0;--u)s+=n[Math.floor(Math.random()*n.length)];return s}t.encrypt=function(e){try{var t=s.createCipheriv(u,o,a),n=t.update(e,"utf8","hex");return n+=t.final("hex")}catch(e){}},t.decrypt=function(e){try{var t=s.createDecipheriv(u,o,a),n=t.update(e,"hex","utf8");return n+=t.final("utf8")}catch(e){}},function(e){e[e.Capital=0]="Capital",e[e.Number=1]="Number",e[e.String=2]="String"}(r||(r={})),t.RandomTypes=r,t.randomNumber=function(e){return i(r.Number,e)},t.randomCapitals=function(e){return i(r.Capital,e)},t.randomString=function(e){return i(r.String,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(9),u=n(10),o=n(11),a=n(12),i=n(13),c=n(14),l=n(15),d=r();d.use(i()),d.use(c.json()),d.use(c.urlencoded({extended:!1})),d.use(s({secret:"insg-yc-ly-17",resave:!1,saveUninitialized:!0,cookie:{maxAge:864e5}})),d.use("/api",l.default),d.get("/",function(e,t){return t.status(200).sendFile(a.join(__dirname,"/client/index.html"))}),d.use(r.static(a.join(__dirname,"/client"))),d.use(r.static(a.join(__dirname,"/client/assets"),{dotfiles:"allow"})),d.all("/*",function(e,t){return t.status(200).sendFile(a.join(__dirname,"/client/index.html"))}),d.use(function(e,t,n){return t.status(500).send("Issue happened. Please retry later!")});var f={cert:o.readFileSync(a.join(__dirname,"./sslforfree/cert.pem")),key:o.readFileSync(a.join(__dirname,"./sslforfree/privkey.pem")),ca:o.readFileSync(a.join(__dirname,"./sslforfree/chain.pem"))};u.createServer(f,d).listen(3e3,"0.0.0.0",function(){console.log("Node server listening on https port 3000")})},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("body-parser")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(16),u=n(18),o=n(20),a=n(26),i=n(36),c=r.Router();c.use("/dictionary",o.dictionaryRouter),c.use("/http",u.default),c.use("/lunchfun",o.lunchfunRouter),c.use("/lta/bus",s.busRouter),c.use("/gifts",a.default),c.post("/msg",function(e,t){i.default(e.body,t)}),c.all("/*",function(e,t){return t.status(400).send("Invalid Request")}),t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(17),u=n(4),o=r.Router();t.busRouter=o,o.get("/busArrival/:busStopCode",function(e,t){s.default(e.params.busStopCode,t)}),o.get("/busStop/:busStopCode",function(e,t){u.getBusStopInfo(e.params.busStopCode,t)}),o.get("/nearbyBusStops",function(e,t){u.getNearbyBusStops(e.query.latitude,e.query.longitude,t)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(3),u=n(4);t.default=function(e,t){if(!(e=e.trim()))return t.status(400).send("Invalid BusStopCode.");var n=u.checkBusStopLocally(e);if(!n)return t.status(400).send("Bus Stop not found.");var o=s.busArrivalUrl+"?BusStopCode="+e;r.default.get(o,s.headerConfig).then(function(e){t.status(200).send({busStopInfo:n,busArrival:e.data})}).catch(function(e){t.status(400).send(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(19),u=r.Router();u.post("",function(e,t){"DELETE"===e.body.type?s.Delete(e.body,t):"GET"===e.body.type?s.Get(e.body,t):"POST"===e.body.type?s.Post(e.body,t):"PUT"===e.body.type&&s.Put(e.body,t)}),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.Delete=function(e,t){var n=e.url;if(e.querys&&e.querys.length>0){n+="?";for(var s=0;s<e.querys.length;++s)n+=e.query[s],n+="=",n+=e.queryValue[s]}r.default.delete(n).then(function(e){t.status(200).send(e)}).catch(function(e){t.status(400).send(e)})},t.Post=function(e,t){return t.status(200).send(e)},t.Put=function(e,t){r.default.put(e.body.url).then(function(e){t.send(e.data)})},t.Get=function(e,t){r.default.post(e.body.url).then(function(e){t.send(e.data)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(21),u=n(23),o=n(25),a=r.Router();t.dictionaryRouter=a;var i=r.Router();t.lunchfunRouter=i,a.get("/oxford/:word",function(e,t){s.default(e.params.word,t)}),i.get("/pals",function(e,t){u.GetPals(t)}),i.post("/pal",function(e,t){u.AddPal(e.body.name,t)}),i.delete("/pal",function(e,t){u.DeletePal(e.query,t)}),i.get("/records",function(e,t){o.GetRecords(t)}),i.post("/record",function(e,t){o.AddRecord(e.body.payer,e.body.attendees,t)}),i.delete("/record",function(e,t){o.DeleteRecord(e.query._id,t)}),i.get("/stats/attendance",function(e,t){u.GetPalsAttendance(t)})},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=new(n(22))("0314e9e2","5a6c2589474a2f83ccd69f397bfec7a2");t.default=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){return e&&e.trim()?(u.find(e.trim(),function(e,n){return e?t.status(400).send(e):t.status(200).send(n)}),[2]):[2,t.status(400).send("Invalid word.")]})})}},function(e,t){e.exports=require("oxford-dictionary-api")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=[];function a(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,u.DbCollection("lunchfun-pals")];case 1:return[4,e.sent().find().sort({name:1}).toArray()];case 2:return o=e.sent(),[3,4];case 3:throw e.sent();case 4:return[2]}})})}t.GetPals=function(e){return r(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:if(o.length>0)return[2,e.status(200).send(o)];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,a()];case 2:return n.sent(),[2,e.status(200).send(o)];case 3:return t=n.sent(),[2,e.status(500).send(t)];case 4:return[2]}})})},t.AddPal=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!e)return[2,t.status(400).send("Invalid input.")];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.DbCollection("lunchfun-pals")];case 2:return r.sent().insertOne({name:e}),a(),[2,t.status(200).send({result:"ok"})];case 3:return n=r.sent(),[2,t.status(500).send(n)];case 4:return[2]}})})},t.DeletePal=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!e)return[2,t.status(400).send("Invalid name to delete.")];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.DbCollection("lunchfun-pals")];case 2:return r.sent().deleteOne({name:e}),a(),[2,t.status(200).send({result:"ok"})];case 3:return n=r.sent(),[2,t.status(500).send(n)];case 4:return[2]}})})},t.GetPalsAttendance=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,u.DbCollection("lunchfun-records")];case 1:return[4,r.sent().aggregate([{$unwind:"$attendees"},{$group:{_id:"$attendees",attendance:{$sum:1}}},{$project:{name:"$_id",attendance:"$attendance"}}]).toArray()];case 2:return t=r.sent(),[2,e.status(200).send(t)];case 3:return n=r.sent(),[2,e.status(500).send(n)];case 4:return[2]}})})}},function(e,t){e.exports=require("mongodb")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1);t.GetRecords=function(e,t){return r(this,void 0,void 0,function(){var n,r;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,u.DbCollection("lunchfun-records")];case 1:return[4,s.sent().find({}).sort({createdOn:-1}).limit(30|t).toArray()];case 2:return n=s.sent(),[2,e.status(200).send(n)];case 3:return r=s.sent(),[2,e.status(500).send(r)];case 4:return[2]}})})},t.AddRecord=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:if(!e||!t||t.length<=0)return[2,n.status(400).send("Invalid params to add.")];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.DbCollection("lunchfun-records")];case 2:return[4,r.sent().insertOne({payer:e,attendees:t,createdOn:new Date})];case 3:return r.sent(),[2,n.status(200).send({result:"ok"})];case 4:return r.sent(),[2,n.status(500).send("Error at server. Please try again later.")];case 5:return[2]}})})},t.DeleteRecord=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!e)return[2,t.status(400).send("Invalid record to delete.")];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.DbCollection("lunchfun-records")];case 2:return r.sent().deleteOne({_id:new u.ObjectID(e)}),[2,t.status(200).send({result:"ok"})];case 3:return n=r.sent(),[2,t.status(500).send(n)];case 4:return[2]}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(27),u=n(30),o=n(31),a=n(35),i=r.Router();i.use("/products",s.default),i.use("/orders",u.default),i.use("/users",o.default),i.use("/staffs",a.default),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(28),u=n(29),o=n(5),a=r.Router();a.get("/view/:product_no",function(e,t){u.GetProduct(e.params,t)}),a.get("/categories",function(e,t){s.GetCategories(t)}),a.post("/category",function(e,t){s.AddCategory(e.body,t)}),a.delete("/category",function(e,t){s.DeleteCategory(e.query,t)}),a.get("/samples",function(e,t){s.GetSamplesOfCategories(t)}),a.get("",function(e,t){u.GetProductsByCategory(e,t)}),a.get("/product",function(e,t){u.GetProduct(e.query,t)}),a.post("/product",function(e,t){u.AddProduct(e.body,t)}),a.put("/product",function(e,t){u.UpdateProduct(e.body,t)}),a.delete("/product",function(e,t){u.DeleteProduct(e.query,t)}),a.get("/inventory",function(e,t){o.GetInventory(t)}),a.put("/inventory",function(e,t){o.AdjustInventory(e.body._id,e.body.qty,t)}),t.default=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=[],a=[];function i(e){return r(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:if(!(o.length<=0))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c()];case 2:return o=n.sent(),[3,4];case 3:throw n.sent();case 4:return 0===e?[2,o]:(t=[],o.forEach(function(n){console.log(n.category.match(new RegExp("/","g"))),n.category.match(new RegExp("/","g")).length<=e&&t.push(n)}),[2,t])}})})}function c(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,u.DbCollection("gifts-products-catalog")];case 1:return[4,e.sent().find().sort("category",1).toArray()];case 2:return[2,o=e.sent()];case 3:throw e.sent(),{errMsg:"Get categories from database failed."};case 4:return[2]}})})}function l(){return r(this,void 0,void 0,function(){var e,t;return s(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,u.DbCollection("gifts-products")];case 1:return e=n.sent(),null,[4,e.aggregate([{$sort:{_id:-1}},{$group:{_id:{category:"$category"},products:{$push:{_id:"$_id",category:"$category",img:"$img"}}}},{$project:{_id:"$_id",products:{$slice:["$products",4]}}}]).toArray()];case 2:return[2,n.sent()];case 3:return t=n.sent(),console.log(t),[2,{errMsg:"Get products failed."}];case 4:return[2]}})})}t.GetCategories=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,i(0)];case 1:return t=r.sent(),[2,e.status(200).send(t)];case 2:return n=r.sent(),[2,e.status(500).send(n)];case 3:return[2]}})})},t.GetSamplesOfCategories=function(e){return r(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:if(a.length>0)return[2,e.status(200).send(a)];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,l()];case 2:return a=n.sent(),[2,e.status(200).send(a)];case 3:return t=n.sent(),[2,e.status(500).send(t)];case 4:return[2]}})})},t.AddCategory=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!e.name||!e.category)return[2,t.status(400).send("Invalid input.")];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.DbCollection("gifts-products-catalog")];case 2:return[4,r.sent().insertOne({name:e.name,category:e.category})];case 3:return r.sent(),o=[],a=[],[2,t.status(200).send({result:"ok"})];case 4:return n=r.sent(),[2,t.status(500).send(n)];case 5:return[2]}})})},t.DeleteCategory=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!e._id)return[2,t.status(400).send("Invalid input.")];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.DbCollection("gifts-products-catalog")];case 2:return[4,r.sent().deleteOne({_id:new u.ObjectID(e._id)})];case 3:return r.sent(),o=[],a=[],[2,t.status(200).send({result:"ok"})];case 4:return n=r.sent(),[2,t.status(500).send(n)];case 5:return[2]}})})}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1);t.GetProduct=function(e,t){return r(this,void 0,void 0,function(){var n,r;return s(this,function(s){switch(s.label){case 0:if(!e._id)return[2,t.status(400).send("Invalid product no.")];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,u.MongoDb()];case 2:return[4,s.sent().collection("gifts-products").findOne({_id:new u.ObjectID(e._id)})];case 3:return n=s.sent(),[2,t.status(200).send(n)];case 4:return r=s.sent(),[2,t.status(500).send(r)];case 5:return[2]}})})},t.GetProductsByCategory=function(e,t){return r(this,void 0,void 0,function(){var n,r,o,a;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),[4,u.DbCollection("gifts-products")];case 1:return n=s.sent(),r=null,e.query.category?(o=new RegExp(["^",e.query.category.trim()].join(""),"i"),[4,n.find({category:o}).toArray()]):[3,3];case 2:return r=s.sent(),[3,5];case 3:return[4,n.find().toArray()];case 4:r=s.sent(),s.label=5;case 5:return[2,t.status(200).send(r)];case 6:return a=s.sent(),[2,t.status(500).send(a)];case 7:return[2]}})})},t.AddProduct=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!e.name)return[2,t.status(400).send("Invalid input.")];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.MongoDb()];case 2:return[4,r.sent().collection("gifts-products").insertOne({name:e.name,img:e.img,price:e.price,category:e.category,color:e.color,packaging:e.packaging,material:e.material,size:e.size,note:e.note,retailer:e.retailer,createdOn:new Date})];case 3:return r.sent(),[2,t.status(200).send({result:"ok"})];case 4:return n=r.sent(),[2,t.status(500).send(n)];case 5:return[2]}})})},t.UpdateProduct=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!e._id)return[2,t.status(400).send("Invalid input.")];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.DbCollection("gifts-products")];case 2:return[4,r.sent().updateOne({_id:new u.ObjectID(e._id)},{$set:{modifiedOn:new Date,name:e.name,img:e.img,price:e.price,category:e.category,color:e.color,packaging:e.packaging,material:e.material,size:e.size,note:e.note,retailer:e.retailer}})];case 3:return r.sent(),[2,t.status(200).send({result:"ok"})];case 4:return n=r.sent(),[2,t.status(500).send(n)];case 5:return[2]}})})},t.DeleteProduct=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!e._id)return[2,t.status(400).send("Invalid input.")];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.MongoDb()];case 2:return[4,r.sent().collection("gifts-products").deleteOne({_id:new u.ObjectID(e._id)})];case 3:return r.sent(),[2,t.status(200).send({result:"ok"})];case 4:return n=r.sent(),[2,t.status(500).send(n)];case 5:return[2]}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).Router();r.get("/allOrders",function(e,t){return e.session&&e.session.staff?t.status(200).send({result:"ok"}):t.sendStatus(401)}),r.put("/updateStatus",function(e,t){if(!e.session||!e.session.staff.id)return t.sendStatus(401);if(!e.body.new_status||!e.body.sno||!e.body.order_no)return t.status(400).send("Failed. Pleaes review inputs.");e.body.order_no,e.body.sno,Date.now(),e.session.staff.id,e.body.new_status,e.body.note;return t.status(200).send({result:"ok"})}),r.put("/updateContact",function(e,t){if(!e.session||!e.session.staff.id)return t.sendStatus(401);if(!e.body.order_no)return t.status(400).send("Order_no empty.");if(!(e.body.email&&e.body.email.includes("@")&&e.body.email.includes("."))||e.body.email.includes("/")||e.body.email.includes("\\"))return t.status(400).send("Invalid email.");if(!e.body.name)return t.status(400).send("Invalid name.");e.body.name,e.body.email,e.body.mobile,e.body.company,e.body.mobile2,e.body.addr,e.body.order_no;return t.status(200).send({result:"ok"})}),r.put("/updateOrderItem",function(e,t){if(!e.session||!e.session.staff.id)return t.sendStatus(401);if(!e.body.order_no)return t.status(400).send("Failed. Invalid Order No.");if(!e.body.sno||""===e.body.sno)return t.status(400).send("Failed. Invalid Order Sno.");e.body.new_sale_price,e.body.new_qty,e.body.new_status,e.body.order_no,e.body.sno;return t.status(200).send({result:"ok"})}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(6),u=n(33),o=r.Router();o.post("/login",function(e,t){s.Login(e,t)}),o.get("/info",function(e,t){s.UserInfo(e.session,t)}),o.get("/logout",function(e,t){s.Logout(e,t)}),o.post("/register",function(e,t){s.Register(e,t)}),o.delete("/deleteuser",function(e,t){s.DeleteUser(e.session,t)}),o.get("/cart",function(e,t){u.GetCart(e.session,t)}),o.post("/cart",function(e,t){u.AddToCart(e.session,e.body,t)}),o.delete("/cart",function(e,t){u.DeleteCart(e.session,t)}),o.put("/cart",function(e,t){u.UpdateCartQty(e,t)}),o.delete("/cart/product",function(e,t){u.DeleteInCart(e.session,e.query._id,t)}),o.post("/cart/checkout",function(e,t){u.CartCheckout(e,t)}),t.default=o},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=n(7),a=n(6),i=n(5),c=n(34);t.GetCart=function(e,t){return r(this,void 0,void 0,function(){var n,r;return s(this,function(s){switch(s.label){case 0:if(!a.bLogin(e))return[2,t.status(403).send("User not login")];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,u.DbCollection("gifts-carts")];case 2:return[4,s.sent().findOne({_id:new u.ObjectID(e.user._id)})];case 3:return n=s.sent(),console.log(n),[2,t.status(200).send(n)];case 4:return r=s.sent(),[2,t.status(500).send(r)];case 5:return[2]}})})},t.AddToCart=function(e,t,n){return r(this,void 0,void 0,function(){var r,o;return s(this,function(s){switch(s.label){case 0:if(!a.bLogin(e))return[2,n.status(403).send("User not login")];s.label=1;case 1:return s.trys.push([1,5,,6]),[4,u.DbCollection("gifts-carts")];case 2:return[4,(r=s.sent()).updateOne({_id:new u.ObjectID(e.user._id)},{$pull:{products:{productId:new u.ObjectID(t.product._id)}}})];case 3:return s.sent(),[4,r.updateOne({_id:new u.ObjectID(e.user._id)},{$push:{products:{productId:new u.ObjectID(t.product._id),quantity:t.qty,name:t.product.name,price:t.product.price}}},{upsert:!0})];case 4:return s.sent(),[2,n.status(200).send({result:"ok"})];case 5:return o=s.sent(),[2,n.status(500).send(o)];case 6:return[2]}})})},t.UpdateCartQty=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(a.bLogin(e.session)||t.status(403).send("User not login."),!e.body.productId||!e.body.qty)return[2,t.status(400).send("Invalid input.")];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.MongoDb()];case 2:return[4,r.sent().collection("gifts-carts").updateOne({_id:e.session.user._id,"products.productId":e.body.productId},{$set:{"products.$.qty":e.body.qty,modifiedOn:new Date}})];case 3:return r.sent(),[2,t.status(200).send({result:"ok"})];case 4:return n=r.sent(),[2,t.status(500).send(n)];case 5:return[2]}})})},t.DeleteCart=function(e,t){return r(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:if(!a.bLogin(e))return[2,t.status(400).send("User not login.")];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.DbCollection("gifts-carts")];case 2:return r.sent().deleteOne({_id:new u.ObjectID(e.user._id)}),[2,t.status(200).send({result:"ok"})];case 3:return n=r.sent(),[2,t.status(500).send(n)];case 4:return[2]}})})},t.DeleteInCart=function(e,t,n){return r(this,void 0,void 0,function(){var r;return s(this,function(s){switch(s.label){case 0:if(!a.bLogin(e))return[2,n.status(400).send("User not login.")];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,u.DbCollection("gifts-carts")];case 2:return[4,s.sent().updateOne({_id:new u.ObjectID(e.user._id)},{$pull:{products:{productId:new u.ObjectID(t)}}})];case 3:return s.sent(),[2,n.status(200).send({result:"ok"})];case 4:return r=s.sent(),[2,n.status(500).send(r)];case 5:return[2]}})})},t.CartCheckout=function(e,t){return r(this,void 0,void 0,function(){var n,r,l,d,f,p;return s(this,function(s){switch(s.label){case 0:if(!(e.body.cart&&e.body.cart.customer&&e.body.cart.customer.name&&e.body.cart.customer.mobile&&e.body.cart.customer.address))return[2,t.status(400).send("Invalid customer information.")];if(e.body.cart.total<=0)return[2,t.status(400).send("No product to checkout.")];n=a.bLogin(e.session),r="",r=n?e.session.user._id:o.randomString(20),l=e.body.cart.cartItems,d=e.body.cart.customer,s.label=1;case 1:return s.trys.push([1,10,,11]),[4,i.ReserveInventory(r,l)];case 2:return s.sent(),[4,c.NewOrder(d,l)];case 3:return s.sent().result.n<=0?[4,i.DeleteInventoryReservation(r)]:[3,5];case 4:throw s.sent(),"Create new order failed.";case 5:return[4,i.DeleteInventoryReservation(r)];case 6:return f=s.sent(),console.log(f),n?[4,u.DbCollection("gifts-carts")]:[3,9];case 7:return[4,s.sent().deleteOne({_id:new u.ObjectID(r)})];case 8:s.sent(),s.label=9;case 9:return[2,t.status(200).send({orderId:r})];case 10:return p=s.sent(),console.error(p),[2,t.status(500).send(p)];case 11:return[2]}})})}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function o(e){try{i(r.next(e))}catch(e){u(e)}}function a(e){try{i(r.throw(e))}catch(e){u(e)}}function i(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,a)}i((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1);t.NewOrder=function(e,t){return r(this,void 0,void 0,function(){var n,r;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,u.DbCollection("gifts-orders")];case 1:return n=s.sent(),r=n.insertOne({created_on:new Date,shipping:{name:e.name,mobile:e.mobile,address:e.address,message:e.message},payment:{method:"visa",transaction_id:"2312213312XXXTD"},cartItems:t}),console.log("insertRslt: ",r),[2,r];case 2:throw s.sent(),"create new order failed.";case 3:return[2]}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).Router();r.post("/login",function(e,t){}),r.get("/logout",function(e,t){}),r.post("/register",function(e,t){}),r.delete("/deleteuser",function(e,t){}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37).createTransport({service:"outlook",auth:{user:"yuanchao@outlook.sg",pass:"pingmeHC83"}}),s={from:"yuanchao@outlook.sg",to:"seesea2@gmail.com",subject:null,html:null};t.default=function(e,t){var n='<!DOCTYPE html><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"></head><body><br><b>Message from User '+e.name+" :</b><br><br><p><b>Email: </b> "+e.email+"</p><p><b>Mobile: </b> "+e.mobile+"</p><p><b>Message: </b> "+e.message+"</p></body></html>";return s.subject="User Inquiry",s.html=n,r.sendMail(s),t.status(200).send({result:"ok"})}},function(e,t){e.exports=require("nodemailer")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZXhwcmVzc1wiIiwid2VicGFjazovLy8uL3NlcnZlci9tb25nb2RiLW9wcy50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJheGlvc1wiIiwid2VicGFjazovLy8uL3NlcnZlci9sdGEvbHRhLnRzIiwid2VicGFjazovLy8uL3NlcnZlci9sdGEvYnVzLXN0b3BzLnRzIiwid2VicGFjazovLy8uL3NlcnZlci9naWZ0cy1wcm9kdWN0cy9naWZ0cy1wcm9kdWN0cy1pbnZlbnRvcnkub3BzLnRzIiwid2VicGFjazovLy8uL3NlcnZlci9naWZ0cy11c2Vycy9naWZ0cy11c2Vycy5vcHMudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL3N0cmluZy1vcHMudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL3NlcnZlci50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJleHByZXNzLXNlc3Npb25cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJodHRwc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcImZzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicGF0aFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImNvcnNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJib2R5LXBhcnNlclwiIiwid2VicGFjazovLy8uL3NlcnZlci9hcGktcm91dGVyLnRzIiwid2VicGFjazovLy8uL3NlcnZlci9sdGEvcm91dGVyLnRzIiwid2VicGFjazovLy8uL3NlcnZlci9sdGEvYnVzLWFycml2YWwudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL2h0dHAtcmVxdWVzdC9yb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL2h0dHAtcmVxdWVzdC9odHRwLXJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL2x1bmNoZnVuLWFuZC1kaWN0aW9uYXJ5L3JvdXRlci50cyIsIndlYnBhY2s6Ly8vLi9zZXJ2ZXIvbHVuY2hmdW4tYW5kLWRpY3Rpb25hcnkvZGljdGlvbmFyeS50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJveGZvcmQtZGljdGlvbmFyeS1hcGlcIiIsIndlYnBhY2s6Ly8vLi9zZXJ2ZXIvbHVuY2hmdW4tYW5kLWRpY3Rpb25hcnkvbHVuY2hmdW4tcGFscy50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtb25nb2RiXCIiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL2x1bmNoZnVuLWFuZC1kaWN0aW9uYXJ5L2x1bmNoZnVuLXJlY29yZHMudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL2FwaS1naWZ0cy1yb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL2dpZnRzLXByb2R1Y3RzL2dpZnRzLXByb2R1Y3RzLXJvdXRlci50cyIsIndlYnBhY2s6Ly8vLi9zZXJ2ZXIvZ2lmdHMtcHJvZHVjdHMvZ2lmdHMtcHJvZHVjdHMtY2F0ZWdvcmllcy5vcHMudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL2dpZnRzLXByb2R1Y3RzL2dpZnRzLXByb2R1Y3RzLm9wcy50cyIsIndlYnBhY2s6Ly8vLi9zZXJ2ZXIvZ2lmdHMtb3JkZXJzL2dpZnRzLW9yZGVycy1yb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL2dpZnRzLXVzZXJzL2dpZnRzLXVzZXJzLXJvdXRlci50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjcnlwdG9cIiIsIndlYnBhY2s6Ly8vLi9zZXJ2ZXIvZ2lmdHMtdXNlcnMvZ2lmdHMtY2FydHMub3BzLnRzIiwid2VicGFjazovLy8uL3NlcnZlci9naWZ0cy1vcmRlcnMvZ2lmdHMtb3JkZXJzLm9wcy50cyIsIndlYnBhY2s6Ly8vLi9zZXJ2ZXIvZ2lmdHMtc3RhZmZzL2dpZnRzLXN0YWZmcy1yb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc2VydmVyL2VtYWlsL2VtYWlsLm9wcy50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJub2RlbWFpbGVyXCIiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJyZXF1aXJlIiwibW9uZ29kYl8xIiwiT2JqZWN0SUQiLCJkYXRhYmFzZSIsIk1PTkdPX1VSTCIsIkluaXREYiIsIk1vbmdvQ2xpZW50IiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsImNsaWVudCIsIl9hIiwic2VudCIsImRiIiwiTW9uZ29EYiIsIkRiQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJidXNBcnJpdmFsVXJsIiwiYnVzU3RvcHNVcmwiLCJoZWFkZXJDb25maWciLCJoZWFkZXJzIiwiQWNjb3VudEtleSIsImF4aW9zXzEiLCJsdGFfMSIsImJ1c1N0b3BzIiwiZ2V0QnVzU3RvcHNGcm9tTHRhIiwic2tpcCIsInVybCIsImRlZmF1bHQiLCJyZXNwb25zZSIsInN0YXR1cyIsImRhdGEiLCJjaGVja0J1c1N0b3BMb2NhbGx5IiwiYnVzU3RvcENvZGUiLCJsZW5ndGgiLCJCdXNTdG9wQ29kZSIsImdldEFsbEJ1c1N0b3BzIiwibmV3QnVzU3RvcHMiLCJ0ZW1wIiwiY29uY2F0IiwiZ2V0QnVzU3RvcEluZm8iLCJyZXMiLCJzZW5kIiwiYnVzU3RvcEluZm8iLCJnZXROZWFyYnlCdXNTdG9wcyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwidW5kZWZpbmVkIiwibmVhcmJ5U3RvcHMiLCJkTGF0IiwiTGF0aXR1ZGUiLCJNYXRoIiwiUEkiLCJkTG9uZyIsIkxvbmdpdHVkZSIsImEiLCJzaW4iLCJjb3MiLCJkaXN0IiwiYXRhbjIiLCJzcXJ0IiwiYWJzIiwicHVzaCIsIm1vbmdvZGJfb3BzXzEiLCJHZXRJbnZlbnRvcnkiLCJmaW5kIiwidG9BcnJheSIsImludmVudG9yeSIsImVfMSIsIkFkanVzdEludmVudG9yeSIsIl9pZCIsInF0eSIsInVwZGF0ZU9uZSIsIiRzZXQiLCJtb2RpZmllZE9uIiwiRGF0ZSIsInVwc2VydCIsInJzbHQiLCJlXzIiLCJSZXNlcnZlSW52ZW50b3J5IiwiaWQiLCJjYXJ0SXRlbXMiLCJzdWNjZXNzIiwiZmFpbGVkIiwiZGJJbnZlbnRvcnkiLCJwcm9kdWN0IiwiJGd0ZSIsIiRpbmMiLCIkcHVzaCIsInJlc2VydmF0aW9ucyIsImNyZWF0ZWRPbiIsInJlc3VsdCIsIm5Nb2RpZmllZCIsInJlc2VydmF0aW9ucy5faWQiLCIkcHVsbCIsIkRlbGV0ZUludmVudG9yeVJlc2VydmF0aW9uIiwidXBkYXRlUnNsdCIsImNvbnNvbGUiLCJsb2ciLCJlXzQiLCJfdGhpcyIsInRoaXMiLCJzdHJpbmdfb3BzXzEiLCJiTG9naW4iLCJzZXNzaW9uIiwidXNlciIsIl9fYXdhaXRlciIsImNyZWF0ZUluZGV4IiwidW5pcXVlIiwiTG9naW4iLCJyZXEiLCJ1aWQiLCJkYlVzZXJzIiwiX2IiLCJmaW5kT25lIiwiYm9keSIsInB3ZCIsImVuY3J5cHQiLCJMb2dvdXQiLCJSZWdpc3RlciIsImVtYWlsIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJpbnNlcnRPbmUiLCJpbnNlcnRlZENvdW50Iiwib3BzIiwiRGVsZXRlVXNlciIsImRlbGV0ZU9uZSIsImVfMyIsIlVzZXJJbmZvIiwiUmFuZG9tVHlwZXMiLCJjcnlwdG8iLCJhbGdvcml0aG0iLCJzY3J5cHRTeW5jIiwiaXYiLCJCdWZmZXIiLCJhbGxvYyIsInJhbmRvbSIsInR5cGUiLCJyU3RyaW5nIiwiU3RyaW5nIiwiTnVtYmVyIiwiQ2FwaXRhbCIsImZsb29yIiwidGV4dCIsImNpcGhlciIsImNyZWF0ZUNpcGhlcml2IiwiY3J5cHRlZCIsInVwZGF0ZSIsImZpbmFsIiwiZSIsImRlY3J5cHQiLCJkZWNpcGhlciIsImNyZWF0ZURlY2lwaGVyaXYiLCJkZWMiLCJyYW5kb21OdW1iZXIiLCJyYW5kb21DYXBpdGFscyIsInJhbmRvbVN0cmluZyIsImV4cHJlc3MiLCJodHRwcyIsImZzIiwicGF0aF8xIiwiY29ycyIsImJvZHlQYXJzZXIiLCJhcGlfcm91dGVyXzEiLCJhcHAiLCJ1c2UiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic2VjcmV0IiwicmVzYXZlIiwic2F2ZVVuaW5pdGlhbGl6ZWQiLCJjb29raWUiLCJtYXhBZ2UiLCJzZW5kRmlsZSIsImpvaW4iLCJfX2Rpcm5hbWUiLCJzdGF0aWMiLCJkb3RmaWxlcyIsImFsbCIsIm5leHQiLCJodHRwc09wdGlvbnMiLCJjZXJ0IiwicmVhZEZpbGVTeW5jIiwiY2EiLCJjcmVhdGVTZXJ2ZXIiLCJsaXN0ZW4iLCJleHByZXNzXzEiLCJyb3V0ZXJfMSIsInJvdXRlcl8yIiwicm91dGVyXzMiLCJhcGlfZ2lmdHNfcm91dGVyXzEiLCJlbWFpbF9vcHNfMSIsImFwaVJvdXRlciIsIlJvdXRlciIsImRpY3Rpb25hcnlSb3V0ZXIiLCJsdW5jaGZ1blJvdXRlciIsImJ1c1JvdXRlciIsInBvc3QiLCJidXNfYXJyaXZhbF8xIiwiYnVzX3N0b3BzXzEiLCJwYXJhbXMiLCJxdWVyeSIsInRyaW0iLCJ0aGVuIiwicmVzcG9zZSIsImJ1c0Fycml2YWwiLCJjYXRjaCIsImh0dHBfcmVxdWVzdF8xIiwiaHR0cFJvdXRlciIsIkRlbGV0ZSIsIkdldCIsIlBvc3QiLCJQdXQiLCJxdWVyeXMiLCJxdWVyeVZhbHVlIiwiZGVsZXRlIiwicHV0IiwiZGljdGlvbmFyeV8xIiwibHVuY2hmdW5fcGFsc18xIiwibHVuY2hmdW5fcmVjb3Jkc18xIiwid29yZCIsIkdldFBhbHMiLCJBZGRQYWwiLCJEZWxldGVQYWwiLCJHZXRSZWNvcmRzIiwiQWRkUmVjb3JkIiwicGF5ZXIiLCJhdHRlbmRlZXMiLCJEZWxldGVSZWNvcmQiLCJHZXRQYWxzQXR0ZW5kYW5jZSIsIkRJQ1QiLCJlcnIiLCJsdW5jaFBhbHMiLCJyZWZyZXNoUGFscyIsInNvcnQiLCJhZ2dyZWdhdGUiLCIkdW53aW5kIiwiJGdyb3VwIiwiYXR0ZW5kYW5jZSIsIiRzdW0iLCIkcHJvamVjdCIsImF0dGVuZGFuY2VzIiwiZV81IiwibGltaXQiLCJyZWNvcmRzIiwiZ2lmdHNfcHJvZHVjdHNfcm91dGVyXzEiLCJnaWZ0c19vcmRlcnNfcm91dGVyXzEiLCJnaWZ0c191c2Vyc19yb3V0ZXJfMSIsImdpZnRzX3N0YWZmc19yb3V0ZXJfMSIsImdpZnRzUm91dGVyIiwiZ2lmdHNfcHJvZHVjdHNfY2F0ZWdvcmllc19vcHNfMSIsImdpZnRzX3Byb2R1Y3RzX29wc18xIiwiZ2lmdHNfcHJvZHVjdHNfaW52ZW50b3J5X29wc18xIiwiZ2lmdHNQcm9kdWN0c1JvdXRlciIsIkdldFByb2R1Y3QiLCJHZXRDYXRlZ29yaWVzIiwiQWRkQ2F0ZWdvcnkiLCJEZWxldGVDYXRlZ29yeSIsIkdldFNhbXBsZXNPZkNhdGVnb3JpZXMiLCJHZXRQcm9kdWN0c0J5Q2F0ZWdvcnkiLCJBZGRQcm9kdWN0IiwiVXBkYXRlUHJvZHVjdCIsIkRlbGV0ZVByb2R1Y3QiLCJnbG9iYWxDYXRlZ29yaWVzIiwiZ2xvYmFsU2FtcGxlc09mQ2F0ZWdvcmllcyIsIkdldENhdGVnb3JpZXNCeUxldmVsIiwibGV2ZWwiLCJHZXRDYXRlZ29yaWVzRnJvbURiIiwicmV0dXJuQ2F0ZWdvcmllcyIsImZvckVhY2giLCJjYXQiLCJjYXRlZ29yeSIsIm1hdGNoIiwiUmVnRXhwIiwiZXJyTXNnIiwiR2V0U2FtcGxlcyIsImRiQ29sbGVjdGlvbiIsIiRzb3J0IiwicHJvZHVjdHMiLCJpbWciLCIkc2xpY2UiLCJlXzciLCJjYXRlZ29yaWVzIiwiZG9jcyIsInJlZ2V4IiwicHJpY2UiLCJjb2xvciIsInBhY2thZ2luZyIsIm1hdGVyaWFsIiwic2l6ZSIsIm5vdGUiLCJyZXRhaWxlciIsImdpZnRzT3JkZXJzUm91dGVyIiwic3RhZmYiLCJzZW5kU3RhdHVzIiwibmV3X3N0YXR1cyIsInNubyIsIm9yZGVyX25vIiwibm93IiwiaW5jbHVkZXMiLCJtb2JpbGUiLCJjb21wYW55IiwibW9iaWxlMiIsImFkZHIiLCJuZXdfc2FsZV9wcmljZSIsIm5ld19xdHkiLCJnaWZ0c191c2Vyc19vcHNfMSIsImdpZnRzX2NhcnRzX29wc18xIiwiZ2lmdHNVc2Vyc1JvdXRlciIsIkdldENhcnQiLCJBZGRUb0NhcnQiLCJEZWxldGVDYXJ0IiwiVXBkYXRlQ2FydFF0eSIsIkRlbGV0ZUluQ2FydCIsIkNhcnRDaGVja291dCIsImdpZnRzX29yZGVyc19vcHNfMSIsImNhcnQiLCJwcm9kdWN0SWQiLCJxdWFudGl0eSIsInByb2R1Y3RzLnByb2R1Y3RJZCIsInByb2R1Y3RzLiQucXR5IiwiY3VzdG9tZXIiLCJhZGRyZXNzIiwidG90YWwiLCJiTWVtYmVyIiwiTmV3T3JkZXIiLCJvcmRlcklkIiwiZXJyb3IiLCJlXzYiLCJkYk9yZGVycyIsImluc2VydFJzbHQiLCJjcmVhdGVkX29uIiwic2hpcHBpbmciLCJtZXNzYWdlIiwicGF5bWVudCIsIm1ldGhvZCIsInRyYW5zYWN0aW9uX2lkIiwiZ2lmdHNTdGFmZnNSb3V0ZXIiLCJvdXRsb29rX3RyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0Iiwic2VydmljZSIsImF1dGgiLCJwYXNzIiwib3V0bG9va19tYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJodG1sIiwiZW1haWxIdG1sIiwic2VuZE1haWwiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFB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ZUFBZ0IsbUJBQzNDalEsVUFBV0EsSUFFYmdCLFFBQVFDLElBQUksZUFBZ0IwTyxHQUM1QixHQUFPQSxVQUVQLGVBQU0saUlDdEJWLElBSU1PLEVBSk50WCxFQUFBLEdBSTBCc08sU0FFMUJnSixFQUFrQjVJLEtBQUssU0FBVSxTQUFDekYsRUFBY3JFLE1BR2hEMFMsRUFBa0JyVyxJQUFJLFVBQVcsU0FBQ2dJLEVBQWNyRSxNQUdoRDBTLEVBQWtCNUksS0FBSyxZQUFhLFNBQUN6RixFQUFjckUsTUFHbkQwUyxFQUFrQjFILE9BQU8sY0FBZSxTQUFDM0csRUFBY3JFLE1BSXZEMUUsRUFBQTZELFFBQWV1VCxpRkNuQmYsSUFJTUMsRUFKTnZYLEVBQUEsSUFJNEJ3WCxnQkFBZ0IsQ0FDMUNDLFFBQVMsVUFDVEMsS0FBTSxDQUNKOU8sS0FBTSxzQkFDTitPLEtBQU0sZ0JBSUpDLEVBQXNCLENBQzFCQyxLQUFNLHNCQUNOQyxHQUFJLG9CQUNKQyxRQUFTLEtBQ1RDLEtBQU0sTUF1QlI5WCxFQUFBNkQsUUFwQkEsU0FBbUJ1RixFQUFXMUUsR0FDNUIsSUFBTXFULEVBQ0osZ0lBRWtDM08sRUFBSzNJLEtBQ3ZDLG1DQUNxQjJJLEVBQUtLLE1BQzFCLDBCQUNzQkwsRUFBSzJMLE9BQzNCLDJCQUN1QjNMLEVBQUs0TixRQUM1QixxQkFNRixPQUhBVSxFQUFvQkcsUUFBVSxlQUM5QkgsRUFBb0JJLEtBQU9DLEVBQzNCVixFQUFvQlcsU0FBU04sR0FDdEJoVCxFQUFJWCxPQUFPLEtBQUtZLEtBQUssQ0FBRWlELE9BQVEsdUJDcEN4QzNILEVBQUFELFFBQUFrQyxRQUFBIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA4KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV4cHJlc3NcIik7IiwiaW1wb3J0IHsgTW9uZ29DbGllbnQsIERiLCBPYmplY3RJRCB9IGZyb20gJ21vbmdvZGInO1xuXG5jb25zdCBNT05HT19VUkwgPVxuICAnbW9uZ29kYitzcnY6Ly9hZG1pbjphZG1pbkBjbHVzdGVyMC1keHdrZy5tb25nb2RiLm5ldC9pbnNnP3JldHJ5V3JpdGVzPXRydWUnO1xuXG5sZXQgZGF0YWJhc2U6IERiO1xuXG5hc3luYyBmdW5jdGlvbiBJbml0RGIoKTogUHJvbWlzZTxEYj4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IE1vbmdvQ2xpZW50LmNvbm5lY3QoTU9OR09fVVJMLCB7XG4gICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gKGRhdGFiYXNlID0gY2xpZW50LmRiKCdpbnNnJykpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkLic7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gTW9uZ29EYigpOiBQcm9taXNlPERiPiB7XG4gIGlmIChkYXRhYmFzZSkge1xuICAgIHJldHVybiBkYXRhYmFzZTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgYXdhaXQgSW5pdERiKCk7XG4gICAgcmV0dXJuIGRhdGFiYXNlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gY29uc29sZS5sb2coZSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBEYkNvbGxlY3Rpb24obmFtZTogc3RyaW5nKSB7XG4gIGlmIChkYXRhYmFzZSkge1xuICAgIHJldHVybiBkYXRhYmFzZS5jb2xsZWN0aW9uKG5hbWUpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBJbml0RGIoKTtcbiAgICByZXR1cm4gZGF0YWJhc2UuY29sbGVjdGlvbihuYW1lKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IGU7XG4gIH1cbn1cblxuZXhwb3J0IHsgRGJDb2xsZWN0aW9uLCBNb25nb0RiLCBPYmplY3RJRCB9O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXhpb3NcIik7IiwiY29uc3QgbHRhQWNjb3VudEtleSA9ICc2c1Z6Zjl6WFJhQ2drSlVkanhJdzJBPT0nO1xuXG5jb25zdCBidXNBcnJpdmFsVXJsID1cbiAgJ2h0dHA6Ly9kYXRhbWFsbDIubXl0cmFuc3BvcnQuc2cvbHRhb2RhdGFzZXJ2aWNlL0J1c0Fycml2YWx2Mic7XG5jb25zdCBidXNTdG9wc1VybCA9ICdodHRwOi8vZGF0YW1hbGwyLm15dHJhbnNwb3J0LnNnL2x0YW9kYXRhc2VydmljZS9CdXNTdG9wcyc7XG5cbmNvbnN0IGhlYWRlckNvbmZpZyA9IHtcbiAgaGVhZGVyczoge1xuICAgIEFjY291bnRLZXk6IGx0YUFjY291bnRLZXlcbiAgfVxufTtcblxuZXhwb3J0IHsgYnVzQXJyaXZhbFVybCwgYnVzU3RvcHNVcmwsIGhlYWRlckNvbmZpZyB9O1xuIiwiaW1wb3J0IEF4aW9zIGZyb20gJ2F4aW9zJztcblxuaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgYnVzU3RvcHNVcmwsIGhlYWRlckNvbmZpZyB9IGZyb20gJy4vbHRhJztcbmltcG9ydCB7IEJ1c1N0b3BJbmZvIH0gZnJvbSAnLi9idXMtc3RvcHMtaW50ZXJmYWNlJztcblxubGV0IGJ1c1N0b3BzOiBCdXNTdG9wSW5mb1tdID0gW107XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEJ1c1N0b3BzRnJvbUx0YShza2lwPzogbnVtYmVyKTogUHJvbWlzZTxCdXNTdG9wSW5mb1tdPiB7XG4gIHRyeSB7XG4gICAgbGV0IHVybCA9IGJ1c1N0b3BzVXJsO1xuICAgIGlmIChza2lwKSB7XG4gICAgICB1cmwgKz0gYD8kc2tpcD0ke3NraXB9YDtcbiAgICB9XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgQXhpb3MuZ2V0KHVybCwgaGVhZGVyQ29uZmlnKTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkge1xuICAgICAgdGhyb3cgeyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS52YWx1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IGU7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsQnVzU3RvcHMoKSB7XG4gIHRyeSB7XG4gICAgbGV0IHNraXAgPSAwO1xuICAgIGxldCBuZXdCdXNTdG9wczogQnVzU3RvcEluZm9bXSA9IFtdO1xuICAgIGRvIHtcbiAgICAgIG5ld0J1c1N0b3BzID0gYXdhaXQgZ2V0QnVzU3RvcHNGcm9tTHRhKHNraXApO1xuICAgICAgbGV0IHRlbXAgPSBidXNTdG9wcztcbiAgICAgIGJ1c1N0b3BzID0gdGVtcC5jb25jYXQobmV3QnVzU3RvcHMpO1xuICAgICAgc2tpcCArPSA1MDA7XG4gICAgfSB3aGlsZSAobmV3QnVzU3RvcHMubGVuZ3RoID09PSA1MDApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgYnVzU3RvcHMgPSBbXTtcbiAgICBnZXRBbGxCdXNTdG9wcygpO1xuICB9XG59XG5nZXRBbGxCdXNTdG9wcygpO1xuXG5mdW5jdGlvbiBjaGVja0J1c1N0b3BMb2NhbGx5KGJ1c1N0b3BDb2RlOiBzdHJpbmcpIHtcbiAgaWYgKCFidXNTdG9wQ29kZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1c1N0b3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGJ1c1N0b3BDb2RlID09PSBidXNTdG9wc1tpXS5CdXNTdG9wQ29kZSkge1xuICAgICAgcmV0dXJuIGJ1c1N0b3BzW2ldO1xuICAgIH1cbiAgfVxuICByZXR1cm47XG59XG5cbmZ1bmN0aW9uIGdldEJ1c1N0b3BJbmZvKGJ1c1N0b3BDb2RlOiBzdHJpbmcsIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKCFidXNTdG9wQ29kZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnSW52YWxpZCBCdXMgU3RvcCBDb2RlLicpO1xuICB9XG4gIGxldCBidXNTdG9wSW5mbyA9IGNoZWNrQnVzU3RvcExvY2FsbHkoYnVzU3RvcENvZGUpO1xuICBpZiAoYnVzU3RvcEluZm8pIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoYnVzU3RvcEluZm8pO1xuICB9XG4gIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnQnVzIFN0b3AgSW5mbyBub3QgZm91bmQuJyk7XG59XG5cbmZ1bmN0aW9uIGdldE5lYXJieUJ1c1N0b3BzKGxhdGl0dWRlOiBudW1iZXIsIGxvbmdpdHVkZTogbnVtYmVyLCByZXM6IFJlc3BvbnNlKSB7XG4gIGlmIChsYXRpdHVkZSA9PT0gdW5kZWZpbmVkIHx8IGxvbmdpdHVkZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIGNvb3JkaW5hdGVzLicpO1xuICB9XG5cbiAgbGV0IG5lYXJieVN0b3BzID0gW107XG4gIGNvbnN0IFIgPSA2MzcxZTM7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnVzU3RvcHMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgZExhdCA9ICgoYnVzU3RvcHNbaV0uTGF0aXR1ZGUgLSBsYXRpdHVkZSkgKiBNYXRoLlBJKSAvIDE4MDtcbiAgICBsZXQgZExvbmcgPSAoKGJ1c1N0b3BzW2ldLkxvbmdpdHVkZSAtIGxvbmdpdHVkZSkgKiBNYXRoLlBJKSAvIDE4MDtcblxuICAgIGxldCBhID1cbiAgICAgIE1hdGguc2luKGRMYXQgLyAyKSAqIE1hdGguc2luKGRMYXQgLyAyKSArXG4gICAgICBNYXRoLmNvcygoYnVzU3RvcHNbaV0uTGF0aXR1ZGUgKiBNYXRoLlBJKSAvIDE4MCkgKlxuICAgICAgICBNYXRoLmNvcygobGF0aXR1ZGUgKiBNYXRoLlBJKSAvIDE4MCkgKlxuICAgICAgICBNYXRoLnNpbihkTG9uZyAvIDIpICpcbiAgICAgICAgTWF0aC5zaW4oZExvbmcgLyAyKTtcbiAgICBsZXQgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG4gICAgbGV0IGRpc3QgPSBSICogYztcbiAgICBpZiAoTWF0aC5hYnMoZGlzdCkgPCA0MDApIHtcbiAgICAgIG5lYXJieVN0b3BzLnB1c2goYnVzU3RvcHNbaV0pO1xuICAgIH1cbiAgfVxuICByZXMuc3RhdHVzKDIwMCkuc2VuZChuZWFyYnlTdG9wcyk7XG59XG5cbmV4cG9ydCB7IGJ1c1N0b3BzLCBjaGVja0J1c1N0b3BMb2NhbGx5LCBnZXRCdXNTdG9wSW5mbywgZ2V0TmVhcmJ5QnVzU3RvcHMgfTtcbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IERiQ29sbGVjdGlvbiwgT2JqZWN0SUQgfSBmcm9tICcuLi9tb25nb2RiLW9wcyc7XG5cbmFzeW5jIGZ1bmN0aW9uIEdldEludmVudG9yeShyZXM6IFJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGJJbnZlbnRvcnkgPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2dpZnRzLWludmVudG9yeScpO1xuICAgIGNvbnN0IGludmVudG9yeSA9IGF3YWl0IGRiSW52ZW50b3J5LmZpbmQoKS50b0FycmF5KCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGludmVudG9yeSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuLy8gcXR5IGJ5IHByb2R1Y3Q7IFRvZG86IGJ5IGNvbG91ciwgc2l6ZSwgZXRjLlxuYXN5bmMgZnVuY3Rpb24gQWRqdXN0SW52ZW50b3J5KF9pZDogc3RyaW5nLCBxdHk6IG51bWJlciwgcmVzOiBSZXNwb25zZSkge1xuICBpZiAoIV9pZCB8fCAhcXR5KSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIGlucHV0LicpO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgZGJJbnZlbnRvcnkgPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2dpZnRzLWludmVudG9yeScpO1xuICAgIGNvbnN0IHJzbHQgPSBhd2FpdCBkYkludmVudG9yeS51cGRhdGVPbmUoXG4gICAgICB7XG4gICAgICAgIF9pZDogbmV3IE9iamVjdElEKF9pZClcbiAgICAgIH0sXG4gICAgICB7ICRzZXQ6IHsgbW9kaWZpZWRPbjogbmV3IERhdGUoKSwgcXR5OiBxdHkgfSB9LFxuICAgICAgeyB1cHNlcnQ6IHRydWUgfVxuICAgICk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHJzbHQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFJlc2VydmVJbnZlbnRvcnkoaWQ6IHN0cmluZywgY2FydEl0ZW1zOiBhbnkpIHtcbiAgaWYgKCFjYXJ0SXRlbXMgfHwgY2FydEl0ZW1zLmxlbmd0aCA8PSAwKSB7XG4gICAgdGhyb3cgJ1RoZSBjYXJ0IGlzIGVtcHR5Lic7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHN1Y2Nlc3MgPSBbXTtcbiAgICBjb25zdCBmYWlsZWQgPSBbXTtcblxuICAgIGNvbnN0IGRiSW52ZW50b3J5ID0gYXdhaXQgRGJDb2xsZWN0aW9uKCdnaWZ0cy1pbnZlbnRvcnknKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcnRJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJJbnZlbnRvcnkudXBkYXRlT25lKFxuICAgICAgICB7XG4gICAgICAgICAgX2lkOiBuZXcgT2JqZWN0SUQoY2FydEl0ZW1zW2ldLnByb2R1Y3QuX2lkKSxcbiAgICAgICAgICBxdHk6IHsgJGd0ZTogY2FydEl0ZW1zW2ldLnF0eSB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkaW5jOiB7IHF0eTogLWNhcnRJdGVtc1tpXS5xdHkgfSxcbiAgICAgICAgICAkcHVzaDoge1xuICAgICAgICAgICAgcmVzZXJ2YXRpb25zOiB7XG4gICAgICAgICAgICAgIHF0eTogY2FydEl0ZW1zW2ldLnF0eSxcbiAgICAgICAgICAgICAgX2lkOiBuZXcgT2JqZWN0SUQoaWQpLFxuICAgICAgICAgICAgICBjcmVhdGVkT246IG5ldyBEYXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAocmVzdWx0LnJlc3VsdC5uTW9kaWZpZWQgPT09IDApIHtcbiAgICAgICAgZmFpbGVkLnB1c2goY2FydEl0ZW1zW2ldLnByb2R1Y3QpO1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Y2Nlc3MucHVzaChjYXJ0SXRlbXNbaV0ucHJvZHVjdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZhaWxlZC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN1Y2Nlc3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGJJbnZlbnRvcnkudXBkYXRlT25lKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIF9pZDogc3VjY2Vzc1tpXS5faWQsXG4gICAgICAgICAgICAncmVzZXJ2YXRpb25zLl9pZCc6IGlkXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkaW5jOiB7IHF0eTogc3VjY2Vzc1tpXS5xdHkgfSxcbiAgICAgICAgICAgICRwdWxsOiB7IHJlc2VydmF0aW9uczogeyBfaWQ6IGlkIH0gfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93ICdOb3QgZW5vdWdoIHN0b3JhZ2UuJztcbiAgICB9XG4gICAgcmV0dXJuICdTdWNjZXNzLic7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBlO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIERlbGV0ZUludmVudG9yeVJlc2VydmF0aW9uKF9pZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGJJbnZlbnRvcnkgPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2dpZnRzLWludmVudG9yeScpO1xuICAgIGxldCB1cGRhdGVSc2x0ID0gYXdhaXQgZGJJbnZlbnRvcnkudXBkYXRlT25lKFxuICAgICAge1xuICAgICAgICAncmVzZXJ2YXRpb25zLl9pZCc6IG5ldyBPYmplY3RJRChfaWQpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkcHVsbDogeyByZXNlcnZhdGlvbnM6IHsgX2lkOiBuZXcgT2JqZWN0SUQoX2lkKSB9IH1cbiAgICAgIH1cbiAgICApO1xuICAgIGlmICh1cGRhdGVSc2x0LnJlc3VsdC5uTW9kaWZpZWQgPD0gMCkge1xuICAgICAgdGhyb3cgJ2RlbGV0ZSByZXNlcnZhdGlvbiBmYWlsZWQuJztcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZVJzbHQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB0aHJvdyAnZGVsZXRlIHJlc2VydmF0aW9uIGZhaWxlZCB3aXRoIGV4Y2VwdGlvbi4nO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIEFkanVzdEludmVudG9yeSxcbiAgRGVsZXRlSW52ZW50b3J5UmVzZXJ2YXRpb24sXG4gIEdldEludmVudG9yeSxcbiAgUmVzZXJ2ZUludmVudG9yeVxufTtcbiIsImltcG9ydCB7IERiQ29sbGVjdGlvbiwgTW9uZ29EYiwgT2JqZWN0SUQgfSBmcm9tICcuLi9tb25nb2RiLW9wcyc7XG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBlbmNyeXB0IH0gZnJvbSAnLi4vc3RyaW5nLW9wcyc7XG5cbihhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGRiID0gYXdhaXQgRGJDb2xsZWN0aW9uKCdnaWZ0cy11c2VycycpO1xuICBkYi5jcmVhdGVJbmRleCgndWlkJywgeyB1bmlxdWU6IHRydWUgfSk7XG59KSgpO1xuXG5hc3luYyBmdW5jdGlvbiBMb2dpbihyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKHJlcS5zZXNzaW9uICYmIHJlcS5zZXNzaW9uLnVzZXIpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyB1aWQ6IHJlcS5zZXNzaW9uLnVzZXIudWlkIH0pO1xuICB9XG4gIHRyeSB7XG4gICAgbGV0IGRiVXNlcnMgPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2dpZnRzLXVzZXJzJyk7XG4gICAgcmVxLnNlc3Npb24udXNlciA9IGF3YWl0IGRiVXNlcnMuZmluZE9uZSh7XG4gICAgICB1aWQ6IHJlcS5ib2R5LnVpZCxcbiAgICAgIHB3ZDogZW5jcnlwdChyZXEuYm9keS5wd2QpXG4gICAgfSk7XG4gICAgaWYgKCFyZXEuc2Vzc2lvbi51c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLnNlbmQoJ0luY29ycmVjdCB1c2VybmFtZSBvciBwYXNzd29yZCcpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyB1aWQ6IHJlcS5zZXNzaW9uLnVzZXIudWlkIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCdzZXJ2ZXIgZXJyb3IuJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gTG9nb3V0KHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xuICBpZiAocmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24udXNlcikge1xuICAgIHJlcS5zZXNzaW9uLnVzZXIgPSBudWxsO1xuICB9XG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHJlc3VsdDogJ29rJyB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gUmVnaXN0ZXIocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4gIGlmIChcbiAgICAhcmVxLmJvZHkudWlkIHx8XG4gICAgIXJlcS5ib2R5LnB3ZCB8fFxuICAgICFyZXEuYm9keS5lbWFpbCB8fFxuICAgICFyZXEuYm9keS5maXJzdE5hbWUgfHxcbiAgICAhcmVxLmJvZHkubGFzdE5hbWVcbiAgKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIGlucHV0LicpO1xuICB9XG4gIHRyeSB7XG4gICAgbGV0IGRiVXNlcnMgPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2dpZnRzLXVzZXJzJyk7XG4gICAgbGV0IHJzbHQgPSBhd2FpdCBkYlVzZXJzLmluc2VydE9uZSh7XG4gICAgICB1aWQ6IHJlcS5ib2R5LnVpZCxcbiAgICAgIHB3ZDogZW5jcnlwdChyZXEuYm9keS5wd2QpLFxuICAgICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsLFxuICAgICAgZmlyc3ROYW1lOiByZXEuYm9keS5maXJzdE5hbWUsXG4gICAgICBsYXN0TmFtZTogcmVxLmJvZHkubGFzdE5hbWUsXG4gICAgICBjcmVhdGVkT246IG5ldyBEYXRlKClcbiAgICB9KTtcbiAgICBpZiAocnNsdC5pbnNlcnRlZENvdW50ID09PSAxKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQocnNsdC5vcHNbMF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoJ1JlZ2lzdGVyIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhlKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoJ1JlZ2lzdGVyIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBEZWxldGVVc2VyKHNlc3Npb246IGFueSwgcmVzOiBSZXNwb25zZSkge1xuICBpZiAoIXNlc3Npb24gfHwgIXNlc3Npb24udXNlcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZCgnTG9naW4gaXMgcmVxdWlyZWQuJyk7XG4gIH1cbiAgdHJ5IHtcbiAgICBsZXQgZGIgPSBhd2FpdCBNb25nb0RiKCk7XG4gICAgZGIuY29sbGVjdGlvbignZ2lmdHMtdXNlcnMnKS5kZWxldGVPbmUoe1xuICAgICAgX2lkOiBzZXNzaW9uLnVzZXIuX2lkXG4gICAgfSk7XG4gICAgc2Vzc2lvbi51c2VyID0gbnVsbDtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdVc2VyIGRlbGV0ZWQuJyB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBVc2VySW5mbyhzZXNzaW9uOiBhbnksIHJlcykge1xuICBpZiAoIWJMb2dpbihzZXNzaW9uKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZCgnVXNlciBOb3QgbG9naW4uJyk7XG4gIH1cbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcbiAgICBfaWQ6IHNlc3Npb24udXNlci5faWQsXG4gICAgdWlkOiBzZXNzaW9uLnVzZXIudWlkLFxuICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGJMb2dpbihzZXNzaW9uOiBhbnkpIHtcbiAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLnVzZXIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCB7IGJMb2dpbiwgTG9naW4sIExvZ291dCwgUmVnaXN0ZXIsIERlbGV0ZVVzZXIsIFVzZXJJbmZvIH07XG4iLCJpbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuY29uc3QgYWxnb3JpdGhtID0gJ2Flcy0xOTItY2JjJztcbmNvbnN0IHBhc3N3b3JkID0gJ2luU0d5YzgzJztcbmNvbnN0IGtleSA9IGNyeXB0by5zY3J5cHRTeW5jKHBhc3N3b3JkLCAnc2FsdCcsIDI0KTtcbmNvbnN0IGl2ID0gQnVmZmVyLmFsbG9jKDE2LCAwKTtcblxuZnVuY3Rpb24gZW5jcnlwdCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICB0cnkge1xuICAgIGxldCBjaXBoZXIgPSBjcnlwdG8uY3JlYXRlQ2lwaGVyaXYoYWxnb3JpdGhtLCBrZXksIGl2KTtcbiAgICBsZXQgY3J5cHRlZDogc3RyaW5nID0gY2lwaGVyLnVwZGF0ZSh0ZXh0LCAndXRmOCcsICdoZXgnKTtcbiAgICBjcnlwdGVkICs9IGNpcGhlci5maW5hbCgnaGV4Jyk7XG4gICAgcmV0dXJuIGNyeXB0ZWQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnZW5jcnlwdCA9PiAnLCBlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWNyeXB0KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgbGV0IGRlY2lwaGVyID0gY3J5cHRvLmNyZWF0ZURlY2lwaGVyaXYoYWxnb3JpdGhtLCBrZXksIGl2KTtcbiAgICBsZXQgZGVjOiBzdHJpbmcgPSBkZWNpcGhlci51cGRhdGUodGV4dCwgJ2hleCcsICd1dGY4Jyk7XG4gICAgZGVjICs9IGRlY2lwaGVyLmZpbmFsKCd1dGY4Jyk7XG4gICAgcmV0dXJuIGRlYztcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdkZWNyeXB0ID0+ICcsIGUpO1xuICB9XG59XG5cbi8qXG4gKiBzdHJpbmcgb3BlcmF0aW9uXG4gKi9cbmVudW0gUmFuZG9tVHlwZXMge1xuICBDYXBpdGFsLFxuICBOdW1iZXIsXG4gIFN0cmluZ1xufVxuXG4vLyByZXR1cm4gc3RyaW5nIG9mIHJhbmRvbSBudW1iZXJzIHdpdGggc3BlY2lmaWVkIGxlbmd0aC5cbmZ1bmN0aW9uIHJhbmRvbU51bWJlcihsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiByYW5kb20oUmFuZG9tVHlwZXMuTnVtYmVyLCBsZW5ndGgpO1xufVxuXG4vLyByZXR1cm4gc3RyaW5nIG9mIHJhbmRvbSBjYXBpdGFsIGNoYXJhY3RlcnMgd2l0aCBzcGVjaWZpZWQgbGVuZ3RoLlxuZnVuY3Rpb24gcmFuZG9tQ2FwaXRhbHMobGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gcmFuZG9tKFJhbmRvbVR5cGVzLkNhcGl0YWwsIGxlbmd0aCk7XG59XG5cbi8vIHJldHVybiBzdHJpbmcgb2YgcmFuZG9tIGNoYXJhY3RlcnMgb3IgbnVtYmVycyB3aXRoIHNwZWNpZmllZCBsZW5ndGguXG5mdW5jdGlvbiByYW5kb21TdHJpbmcobGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gcmFuZG9tKFJhbmRvbVR5cGVzLlN0cmluZywgbGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gcmFuZG9tKHR5cGU6IFJhbmRvbVR5cGVzLCBsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG4gIGxldCByU3RyaW5nOiBzdHJpbmcgPSAnJztcbiAgaWYgKHR5cGUgPT09IFJhbmRvbVR5cGVzLlN0cmluZykge1xuICAgIHJTdHJpbmcgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFJhbmRvbVR5cGVzLk51bWJlcikge1xuICAgIHJTdHJpbmcgPSAnMDEyMzQ1Njc4OSc7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gUmFuZG9tVHlwZXMuQ2FwaXRhbCkge1xuICAgIHJTdHJpbmcgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGxldCByZXN1bHQ6IHN0cmluZyA9ICcnO1xuICBmb3IgKGxldCBpID0gbGVuZ3RoOyBpID4gMDsgLS1pKSB7XG4gICAgcmVzdWx0ICs9IHJTdHJpbmdbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogclN0cmluZy5sZW5ndGgpXTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQge1xuICBlbmNyeXB0LFxuICBkZWNyeXB0LFxuICByYW5kb21DYXBpdGFscyxcbiAgcmFuZG9tTnVtYmVyLFxuICByYW5kb21TdHJpbmcsXG4gIFJhbmRvbVR5cGVzXG59O1xuIiwiaW1wb3J0ICogYXMgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCAqIGFzIHNlc3Npb24gZnJvbSAnZXhwcmVzcy1zZXNzaW9uJztcbmltcG9ydCAqIGFzIGh0dHBzIGZyb20gJ2h0dHBzJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCAqIGFzIGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgKiBhcyBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcblxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UsIE5leHRGdW5jdGlvbiB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCBhcGlSb3V0ZXIgZnJvbSAnLi9hcGktcm91dGVyJztcblxuLy8gRXhwcmVzcyBzZXJ2ZXJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuYXBwLnVzZShjb3JzKCkpO1xuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG5cbmFwcC51c2UoXG4gIHNlc3Npb24oe1xuICAgIHNlY3JldDogJ2luc2cteWMtbHktMTcnLFxuICAgIHJlc2F2ZTogZmFsc2UsXG4gICAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IHRydWUsXG4gICAgY29va2llOiB7XG4gICAgICBtYXhBZ2U6IDEwMDAgKiA2MCAqIDYwICogMjQgLy8gbWlsbHNlY29uZHMgb2YgMjRocnMgIH1cbiAgICB9XG4gIH0pXG4pO1xuXG5hcHAudXNlKCcvYXBpJywgYXBpUm91dGVyKTtcblxuYXBwLmdldCgnLycsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kRmlsZShqb2luKF9fZGlybmFtZSwgJy9jbGllbnQvaW5kZXguaHRtbCcpKTtcbn0pO1xuXG4vLyBTZXJ2ZXIgc3RhdGljIGZpbGVzIGZyb20gL2NsaWVudFxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhqb2luKF9fZGlybmFtZSwgJy9jbGllbnQnKSkpO1xuYXBwLnVzZShcbiAgZXhwcmVzcy5zdGF0aWMoam9pbihfX2Rpcm5hbWUsICcvY2xpZW50L2Fzc2V0cycpLCB7IGRvdGZpbGVzOiAnYWxsb3cnIH0pXG4pO1xuXG4vLyBlcnJvciBoYW5kbGluZyAtIDFcbmFwcC5hbGwoJy8qJywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmRGaWxlKGpvaW4oX19kaXJuYW1lLCAnL2NsaWVudC9pbmRleC5odG1sJykpO1xufSk7XG4vLyBlcnJvciBoYW5kbGluZyAtIDJcbmFwcC51c2UoKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSA9PiB7XG4gIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCgnSXNzdWUgaGFwcGVuZWQuIFBsZWFzZSByZXRyeSBsYXRlciEnKTtcbn0pO1xuXG4vLyBTdGFydCB1cCB0aGUgTm9kZSBodHRwcyBzZXJ2ZXIgZGVmYXVsdCBwb3J0XG5jb25zdCBodHRwc09wdGlvbnMgPSB7XG4gIGNlcnQ6IGZzLnJlYWRGaWxlU3luYyhqb2luKF9fZGlybmFtZSwgJy4vc3NsZm9yZnJlZS9jZXJ0LnBlbScpKSxcbiAga2V5OiBmcy5yZWFkRmlsZVN5bmMoam9pbihfX2Rpcm5hbWUsICcuL3NzbGZvcmZyZWUvcHJpdmtleS5wZW0nKSksXG4gIGNhOiBmcy5yZWFkRmlsZVN5bmMoam9pbihfX2Rpcm5hbWUsICcuL3NzbGZvcmZyZWUvY2hhaW4ucGVtJykpXG59O1xuY29uc3QgaHR0cHNfc2VydmVyID0gaHR0cHMuY3JlYXRlU2VydmVyKGh0dHBzT3B0aW9ucywgYXBwKTtcbmh0dHBzX3NlcnZlci5saXN0ZW4oMzAwMCwgJzAuMC4wLjAnLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBOb2RlIHNlcnZlciBsaXN0ZW5pbmcgb24gaHR0cHMgcG9ydCAzMDAwYCk7XG59KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV4cHJlc3Mtc2Vzc2lvblwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJodHRwc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwYXRoXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNvcnNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYm9keS1wYXJzZXJcIik7IiwiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuaW1wb3J0IHsgYnVzUm91dGVyIH0gZnJvbSAnLi9sdGEvcm91dGVyJztcbmltcG9ydCBodHRwUm91dGVyIGZyb20gJy4vaHR0cC1yZXF1ZXN0L3JvdXRlcic7XG5pbXBvcnQge1xuICBkaWN0aW9uYXJ5Um91dGVyLFxuICBsdW5jaGZ1blJvdXRlclxufSBmcm9tICcuL2x1bmNoZnVuLWFuZC1kaWN0aW9uYXJ5L3JvdXRlcic7XG5pbXBvcnQgZ2lmdHNSb3V0ZXIgZnJvbSAnLi9hcGktZ2lmdHMtcm91dGVyJztcbmltcG9ydCBTZW5kRW1haWwgZnJvbSAnLi9lbWFpbC9lbWFpbC5vcHMnO1xuXG5jb25zdCBhcGlSb3V0ZXIgPSBSb3V0ZXIoKTtcblxuLy8gdXJsOiAvYXBpXG5hcGlSb3V0ZXIudXNlKCcvZGljdGlvbmFyeScsIGRpY3Rpb25hcnlSb3V0ZXIpO1xuYXBpUm91dGVyLnVzZSgnL2h0dHAnLCBodHRwUm91dGVyKTtcbmFwaVJvdXRlci51c2UoJy9sdW5jaGZ1bicsIGx1bmNoZnVuUm91dGVyKTtcbmFwaVJvdXRlci51c2UoJy9sdGEvYnVzJywgYnVzUm91dGVyKTtcbmFwaVJvdXRlci51c2UoJy9naWZ0cycsIGdpZnRzUm91dGVyKTtcblxuLy8gbXNnIGZyb20gdXNlcnM7IGZvcndhcmQgaXQgdmlhIG5vZGVtYWlsZXIuXG5hcGlSb3V0ZXIucG9zdCgnL21zZycsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgU2VuZEVtYWlsKHJlcS5ib2R5LCByZXMpO1xufSk7XG5cbi8vIGVycm9yIGhhbmRsaW5nXG5hcGlSb3V0ZXIuYWxsKCcvKicsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIFJlcXVlc3QnKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcGlSb3V0ZXI7XG4iLCJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcblxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IGdldEJ1c0Fycml2YWwgZnJvbSAnLi9idXMtYXJyaXZhbCc7XG5pbXBvcnQgeyBnZXRCdXNTdG9wSW5mbywgZ2V0TmVhcmJ5QnVzU3RvcHMgfSBmcm9tICcuL2J1cy1zdG9wcyc7XG5cbi8vIHVybDogL2FwaS9sdGEvYnVzXG5jb25zdCBidXNSb3V0ZXIgPSBSb3V0ZXIoKTtcblxuYnVzUm91dGVyLmdldCgnL2J1c0Fycml2YWwvOmJ1c1N0b3BDb2RlJywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICBnZXRCdXNBcnJpdmFsKHJlcS5wYXJhbXMuYnVzU3RvcENvZGUsIHJlcyk7XG59KTtcblxuYnVzUm91dGVyLmdldCgnL2J1c1N0b3AvOmJ1c1N0b3BDb2RlJywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICBnZXRCdXNTdG9wSW5mbyhyZXEucGFyYW1zLmJ1c1N0b3BDb2RlLCByZXMpO1xufSk7XG5cbmJ1c1JvdXRlci5nZXQoJy9uZWFyYnlCdXNTdG9wcycsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgZ2V0TmVhcmJ5QnVzU3RvcHMocmVxLnF1ZXJ5LmxhdGl0dWRlLCByZXEucXVlcnkubG9uZ2l0dWRlLCByZXMpO1xufSk7XG5cbmV4cG9ydCB7IGJ1c1JvdXRlciB9O1xuIiwiaW1wb3J0IEF4aW9zIGZyb20gJ2F4aW9zJztcblxuaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgYnVzQXJyaXZhbFVybCwgaGVhZGVyQ29uZmlnIH0gZnJvbSAnLi9sdGEnO1xuaW1wb3J0IHsgY2hlY2tCdXNTdG9wTG9jYWxseSB9IGZyb20gJy4vYnVzLXN0b3BzJztcblxuZnVuY3Rpb24gZ2V0QnVzQXJyaXZhbChidXNTdG9wQ29kZTogc3RyaW5nLCByZXM6IFJlc3BvbnNlKSB7XG4gIGJ1c1N0b3BDb2RlID0gYnVzU3RvcENvZGUudHJpbSgpO1xuICBpZiAoIWJ1c1N0b3BDb2RlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIEJ1c1N0b3BDb2RlLicpO1xuICB9XG5cbiAgbGV0IGJ1c1N0b3BJbmZvID0gY2hlY2tCdXNTdG9wTG9jYWxseShidXNTdG9wQ29kZSk7XG4gIGlmICghYnVzU3RvcEluZm8pIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ0J1cyBTdG9wIG5vdCBmb3VuZC4nKTtcbiAgfVxuXG4gIGxldCB1cmwgPSBgJHtidXNBcnJpdmFsVXJsfT9CdXNTdG9wQ29kZT0ke2J1c1N0b3BDb2RlfWA7XG4gIEF4aW9zLmdldCh1cmwsIGhlYWRlckNvbmZpZylcbiAgICAudGhlbihyZXNwb3NlID0+IHtcbiAgICAgIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgLnNlbmQoeyBidXNTdG9wSW5mbzogYnVzU3RvcEluZm8sIGJ1c0Fycml2YWw6IHJlc3Bvc2UuZGF0YSB9KTtcbiAgICB9KVxuICAgIC5jYXRjaChlID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGUpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRCdXNBcnJpdmFsO1xuIiwiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5cbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IERlbGV0ZSwgR2V0LCBQb3N0LCBQdXQgfSBmcm9tICcuL2h0dHAtcmVxdWVzdCc7XG5cbmNvbnN0IGh0dHBSb3V0ZXIgPSBSb3V0ZXIoKTtcblxuaHR0cFJvdXRlci5wb3N0KCcnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIGlmIChyZXEuYm9keS50eXBlID09PSAnREVMRVRFJykge1xuICAgIERlbGV0ZShyZXEuYm9keSwgcmVzKTtcbiAgfSBlbHNlIGlmIChyZXEuYm9keS50eXBlID09PSAnR0VUJykge1xuICAgIEdldChyZXEuYm9keSwgcmVzKTtcbiAgfSBlbHNlIGlmIChyZXEuYm9keS50eXBlID09PSAnUE9TVCcpIHtcbiAgICBQb3N0KHJlcS5ib2R5LCByZXMpO1xuICB9IGVsc2UgaWYgKHJlcS5ib2R5LnR5cGUgPT09ICdQVVQnKSB7XG4gICAgUHV0KHJlcS5ib2R5LCByZXMpO1xuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgaHR0cFJvdXRlcjtcbiIsImltcG9ydCBBeGlvcyBmcm9tICdheGlvcyc7XG5cbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcblxuZnVuY3Rpb24gRGVsZXRlKGJvZHk6IGFueSwgcmVzOiBSZXNwb25zZSkge1xuICBsZXQgdXJsID0gYm9keS51cmw7XG4gIGlmIChib2R5LnF1ZXJ5cyAmJiBib2R5LnF1ZXJ5cy5sZW5ndGggPiAwKSB7XG4gICAgdXJsICs9ICc/JztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZHkucXVlcnlzLmxlbmd0aDsgKytpKSB7XG4gICAgICB1cmwgKz0gYm9keS5xdWVyeVtpXTtcbiAgICAgIHVybCArPSAnPSc7XG4gICAgICB1cmwgKz0gYm9keS5xdWVyeVZhbHVlW2ldO1xuICAgIH1cbiAgfVxuICBBeGlvcy5kZWxldGUodXJsKVxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHJlc3BvbnNlKTtcbiAgICB9KVxuICAgIC5jYXRjaChlID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGUpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gUG9zdChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgbGV0IGhlYWRlcnMgPSB7fTtcblxuICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQocmVxKTtcbiAgbGV0IHVybDogc3RyaW5nID0gcmVxLmJvZHkudXJsO1xuICBpZiAocmVxLmJvZHkuaGVhZGVycykge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBoZWFkZXJzOiByZXEuYm9keS5oZWFkZXJzXG4gICAgfTtcbiAgfVxuICBpZiAocmVxLmJvZHkucGFyYW1ldGVycykge1xuICAgIHVybCArPSAnPyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXEuYm9keS5wYXJhbWV0ZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICB1cmwgKz0gcmVxLmJvZHkucGFyYW1ldGVyc1tpXSArICc9JyArIHJlcS5ib2R5LnBhcmFtZXRlclZhbHVlW2ldICsgJyYnO1xuICAgIH1cbiAgfVxuICBBeGlvcy5nZXQodXJsLCBoZWFkZXJzKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICByZXMuc2VuZChyZXNwb25zZS5kYXRhKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBQdXQocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4gIEF4aW9zLnB1dChyZXEuYm9keS51cmwpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgIHJlcy5zZW5kKHJlc3BvbnNlLmRhdGEpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIEdldChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgQXhpb3MucG9zdChyZXEuYm9keS51cmwpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgIHJlcy5zZW5kKHJlc3BvbnNlLmRhdGEpO1xuICB9KTtcbn1cblxuZXhwb3J0IHsgRGVsZXRlLCBHZXQsIFBvc3QsIFB1dCB9O1xuIiwiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5cbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCBDaGVja094Zm9yZERpY3Rpb25hcnkgZnJvbSAnLi9kaWN0aW9uYXJ5JztcbmltcG9ydCB7IEFkZFBhbCwgRGVsZXRlUGFsLCBHZXRQYWxzLCBHZXRQYWxzQXR0ZW5kYW5jZSB9IGZyb20gJy4vbHVuY2hmdW4tcGFscyc7XG5pbXBvcnQgeyBBZGRSZWNvcmQsIERlbGV0ZVJlY29yZCwgR2V0UmVjb3JkcyB9IGZyb20gJy4vbHVuY2hmdW4tcmVjb3Jkcyc7XG5cbmNvbnN0IGRpY3Rpb25hcnlSb3V0ZXIgPSBSb3V0ZXIoKTtcbmNvbnN0IGx1bmNoZnVuUm91dGVyID0gUm91dGVyKCk7XG5cbmRpY3Rpb25hcnlSb3V0ZXIuZ2V0KCcvb3hmb3JkLzp3b3JkJywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICBDaGVja094Zm9yZERpY3Rpb25hcnkocmVxLnBhcmFtcy53b3JkLCByZXMpO1xufSk7XG5cbmx1bmNoZnVuUm91dGVyLmdldCgnL3BhbHMnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIEdldFBhbHMocmVzKTtcbn0pO1xubHVuY2hmdW5Sb3V0ZXIucG9zdCgnL3BhbCcsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgQWRkUGFsKHJlcS5ib2R5Lm5hbWUsIHJlcyk7XG59KTtcbmx1bmNoZnVuUm91dGVyLmRlbGV0ZSgnL3BhbCcsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgRGVsZXRlUGFsKHJlcS5xdWVyeSwgcmVzKTtcbn0pO1xuXG5sdW5jaGZ1blJvdXRlci5nZXQoJy9yZWNvcmRzJywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICBHZXRSZWNvcmRzKHJlcyk7XG59KTtcbmx1bmNoZnVuUm91dGVyLnBvc3QoJy9yZWNvcmQnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIEFkZFJlY29yZChyZXEuYm9keS5wYXllciwgcmVxLmJvZHkuYXR0ZW5kZWVzLCByZXMpO1xufSk7XG5sdW5jaGZ1blJvdXRlci5kZWxldGUoJy9yZWNvcmQnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIERlbGV0ZVJlY29yZChyZXEucXVlcnkuX2lkLCByZXMpO1xufSk7XG5cbmx1bmNoZnVuUm91dGVyLmdldCgnL3N0YXRzL2F0dGVuZGFuY2UnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIEdldFBhbHNBdHRlbmRhbmNlKHJlcyk7XG59KTtcblxuZXhwb3J0IHsgZGljdGlvbmFyeVJvdXRlciwgbHVuY2hmdW5Sb3V0ZXIgfTtcbiIsImltcG9ydCAqIGFzIE94Zm9yZERpY3Rpb25hcnkgZnJvbSAnb3hmb3JkLWRpY3Rpb25hcnktYXBpJzsgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuXG5pbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5cbmNvbnN0IGFwcF9pZDogc3RyaW5nID0gJzAzMTRlOWUyJztcbmNvbnN0IGFwcF9rZXk6IHN0cmluZyA9ICc1YTZjMjU4OTQ3NGEyZjgzY2NkNjlmMzk3YmZlYzdhMic7XG5jb25zdCBESUNUID0gbmV3IE94Zm9yZERpY3Rpb25hcnkoYXBwX2lkLCBhcHBfa2V5KTtcblxuYXN5bmMgZnVuY3Rpb24gQ2hlY2tPeGZvcmREaWN0aW9uYXJ5KHdvcmQ6IHN0cmluZywgcmVzOiBSZXNwb25zZSkge1xuICBpZiAoIXdvcmQgfHwgIXdvcmQudHJpbSgpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIHdvcmQuJyk7XG4gIH1cblxuICBESUNULmZpbmQod29yZC50cmltKCksIChlcnIsIGRhdGEpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGRhdGEpO1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2hlY2tPeGZvcmREaWN0aW9uYXJ5O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwib3hmb3JkLWRpY3Rpb25hcnktYXBpXCIpOyIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IERiQ29sbGVjdGlvbiB9IGZyb20gJy4uL21vbmdvZGItb3BzJztcblxubGV0IGx1bmNoUGFscyA9IFtdO1xuXG5hc3luYyBmdW5jdGlvbiByZWZyZXNoUGFscygpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYWxzQ29sbGVjdGlvbiA9IGF3YWl0IERiQ29sbGVjdGlvbignbHVuY2hmdW4tcGFscycpO1xuICAgIGx1bmNoUGFscyA9IGF3YWl0IHBhbHNDb2xsZWN0aW9uXG4gICAgICAuZmluZCgpXG4gICAgICAuc29ydCh7IG5hbWU6IDEgfSlcbiAgICAgIC50b0FycmF5KCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBlO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEdldFBhbHMocmVzOiBSZXNwb25zZSkge1xuICBpZiAobHVuY2hQYWxzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQobHVuY2hQYWxzKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgYXdhaXQgcmVmcmVzaFBhbHMoKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQobHVuY2hQYWxzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChlKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBBZGRQYWwobmFtZTogc3RyaW5nLCByZXM6IFJlc3BvbnNlKSB7XG4gIGlmICghbmFtZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnSW52YWxpZCBpbnB1dC4nKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcGFsc0NvbGxlY3Rpb24gPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2x1bmNoZnVuLXBhbHMnKTtcbiAgICBwYWxzQ29sbGVjdGlvbi5pbnNlcnRPbmUoeyBuYW1lOiBuYW1lIH0pO1xuICAgIHJlZnJlc2hQYWxzKCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgcmVzdWx0OiAnb2snIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIERlbGV0ZVBhbChuYW1lOiBzdHJpbmcsIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKCFuYW1lKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIG5hbWUgdG8gZGVsZXRlLicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBwYWxzQ29sbGVjdGlvbiA9IGF3YWl0IERiQ29sbGVjdGlvbignbHVuY2hmdW4tcGFscycpO1xuICAgIHBhbHNDb2xsZWN0aW9uLmRlbGV0ZU9uZSh7IG5hbWU6IG5hbWUgfSk7XG4gICAgcmVmcmVzaFBhbHMoKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gR2V0UGFsc0F0dGVuZGFuY2UocmVzOiBSZXNwb25zZSkge1xuICB0cnkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2x1bmNoZnVuLXJlY29yZHMnKTtcbiAgICBjb25zdCBhdHRlbmRhbmNlcyA9IGF3YWl0IGNvbGxlY3Rpb25cbiAgICAgIC5hZ2dyZWdhdGUoW1xuICAgICAgICB7ICR1bndpbmQ6ICckYXR0ZW5kZWVzJyB9LFxuICAgICAgICB7ICRncm91cDogeyBfaWQ6ICckYXR0ZW5kZWVzJywgYXR0ZW5kYW5jZTogeyAkc3VtOiAxIH0gfSB9LFxuICAgICAgICB7ICRwcm9qZWN0OiB7IG5hbWU6ICckX2lkJywgYXR0ZW5kYW5jZTogJyRhdHRlbmRhbmNlJyB9IH1cbiAgICAgIF0pXG4gICAgICAudG9BcnJheSgpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZChhdHRlbmRhbmNlcyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuZXhwb3J0IHsgQWRkUGFsLCBEZWxldGVQYWwsIEdldFBhbHMsIEdldFBhbHNBdHRlbmRhbmNlIH07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtb25nb2RiXCIpOyIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IERiQ29sbGVjdGlvbiwgT2JqZWN0SUQgfSBmcm9tICcuLi9tb25nb2RiLW9wcyc7XG5cbmFzeW5jIGZ1bmN0aW9uIEdldFJlY29yZHMocmVzOiBSZXNwb25zZSwgcXR5PzogbnVtYmVyKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IERiQ29sbGVjdGlvbignbHVuY2hmdW4tcmVjb3JkcycpO1xuICAgIGNvbnN0IHJlY29yZHMgPSBhd2FpdCBjb2xsZWN0aW9uXG4gICAgICAuZmluZCh7fSlcbiAgICAgIC5zb3J0KHsgY3JlYXRlZE9uOiAtMSB9KVxuICAgICAgLmxpbWl0KHF0eSB8IDMwKVxuICAgICAgLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQocmVjb3Jkcyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gQWRkUmVjb3JkKHBheWVyOiBzdHJpbmcsIGF0dGVuZGVlczogc3RyaW5nW10sIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKCFwYXllciB8fCAhYXR0ZW5kZWVzIHx8IGF0dGVuZGVlcy5sZW5ndGggPD0gMCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnSW52YWxpZCBwYXJhbXMgdG8gYWRkLicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgRGJDb2xsZWN0aW9uKCdsdW5jaGZ1bi1yZWNvcmRzJyk7XG4gICAgYXdhaXQgY29sbGVjdGlvbi5pbnNlcnRPbmUoe1xuICAgICAgcGF5ZXI6IHBheWVyLFxuICAgICAgYXR0ZW5kZWVzOiBhdHRlbmRlZXMsXG4gICAgICBjcmVhdGVkT246IG5ldyBEYXRlKClcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhlKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoJ0Vycm9yIGF0IHNlcnZlci4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBEZWxldGVSZWNvcmQoX2lkOiBzdHJpbmcsIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKCFfaWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ0ludmFsaWQgcmVjb3JkIHRvIGRlbGV0ZS4nKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IERiQ29sbGVjdGlvbignbHVuY2hmdW4tcmVjb3JkcycpO1xuICAgIGNvbGxlY3Rpb24uZGVsZXRlT25lKHsgX2lkOiBuZXcgT2JqZWN0SUQoX2lkKSB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuZXhwb3J0IHsgQWRkUmVjb3JkLCBEZWxldGVSZWNvcmQsIEdldFJlY29yZHMgfTtcbiIsImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuXG5pbXBvcnQgZ2lmdHNQcm9kdWN0c1JvdXRlciBmcm9tICcuL2dpZnRzLXByb2R1Y3RzL2dpZnRzLXByb2R1Y3RzLXJvdXRlcic7XG5pbXBvcnQgZ2lmdHNPcmRlcnNSb3V0ZXIgZnJvbSAnLi9naWZ0cy1vcmRlcnMvZ2lmdHMtb3JkZXJzLXJvdXRlcic7XG5pbXBvcnQgZ2lmdHNVc2Vyc1JvdXRlciBmcm9tICcuL2dpZnRzLXVzZXJzL2dpZnRzLXVzZXJzLXJvdXRlcic7XG5pbXBvcnQgZ2lmdHNTdGFmZnNSb3V0ZXIgZnJvbSAnLi9naWZ0cy1zdGFmZnMvZ2lmdHMtc3RhZmZzLXJvdXRlcic7XG5cbmNvbnN0IGdpZnRzUm91dGVyID0gUm91dGVyKCk7XG5cbi8vIHVybDogL2FwaS9naWZ0c1xuZ2lmdHNSb3V0ZXIudXNlKCcvcHJvZHVjdHMnLCBnaWZ0c1Byb2R1Y3RzUm91dGVyKTtcbmdpZnRzUm91dGVyLnVzZSgnL29yZGVycycsIGdpZnRzT3JkZXJzUm91dGVyKTtcbmdpZnRzUm91dGVyLnVzZSgnL3VzZXJzJywgZ2lmdHNVc2Vyc1JvdXRlcik7XG5naWZ0c1JvdXRlci51c2UoJy9zdGFmZnMnLCBnaWZ0c1N0YWZmc1JvdXRlcik7XG5cbmV4cG9ydCBkZWZhdWx0IGdpZnRzUm91dGVyO1xuIiwiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5cbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7XG4gIEFkZENhdGVnb3J5LFxuICBEZWxldGVDYXRlZ29yeSxcbiAgR2V0Q2F0ZWdvcmllcyxcbiAgR2V0U2FtcGxlc09mQ2F0ZWdvcmllc1xufSBmcm9tICcuL2dpZnRzLXByb2R1Y3RzLWNhdGVnb3JpZXMub3BzJztcbmltcG9ydCB7XG4gIEFkZFByb2R1Y3QsXG4gIERlbGV0ZVByb2R1Y3QsXG4gIEdldFByb2R1Y3QsXG4gIEdldFByb2R1Y3RzQnlDYXRlZ29yeSxcbiAgVXBkYXRlUHJvZHVjdFxufSBmcm9tICcuL2dpZnRzLXByb2R1Y3RzLm9wcyc7XG5pbXBvcnQgeyBBZGp1c3RJbnZlbnRvcnksIEdldEludmVudG9yeSB9IGZyb20gJy4vZ2lmdHMtcHJvZHVjdHMtaW52ZW50b3J5Lm9wcyc7XG5cbmNvbnN0IGdpZnRzUHJvZHVjdHNSb3V0ZXIgPSBSb3V0ZXIoKTtcblxuZ2lmdHNQcm9kdWN0c1JvdXRlci5nZXQoJy92aWV3Lzpwcm9kdWN0X25vJywgKHJlcSwgcmVzKSA9PiB7XG4gIEdldFByb2R1Y3QocmVxLnBhcmFtcywgcmVzKTtcbn0pO1xuXG4vKlxuICogaW5xdWlyeTogL2FwaS9naWZ0cy9wcm9kdWN0c1xuICovXG5naWZ0c1Byb2R1Y3RzUm91dGVyLmdldCgnL2NhdGVnb3JpZXMnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIEdldENhdGVnb3JpZXMocmVzKTtcbn0pO1xuZ2lmdHNQcm9kdWN0c1JvdXRlci5wb3N0KCcvY2F0ZWdvcnknLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIEFkZENhdGVnb3J5KHJlcS5ib2R5LCByZXMpO1xufSk7XG5naWZ0c1Byb2R1Y3RzUm91dGVyLmRlbGV0ZSgnL2NhdGVnb3J5JywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICBEZWxldGVDYXRlZ29yeShyZXEucXVlcnksIHJlcyk7XG59KTtcblxuZ2lmdHNQcm9kdWN0c1JvdXRlci5nZXQoJy9zYW1wbGVzJywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICBHZXRTYW1wbGVzT2ZDYXRlZ29yaWVzKHJlcyk7XG59KTtcbmdpZnRzUHJvZHVjdHNSb3V0ZXIuZ2V0KCcnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIEdldFByb2R1Y3RzQnlDYXRlZ29yeShyZXEsIHJlcyk7XG59KTtcbmdpZnRzUHJvZHVjdHNSb3V0ZXIuZ2V0KCcvcHJvZHVjdCcsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgR2V0UHJvZHVjdChyZXEucXVlcnksIHJlcyk7XG59KTtcbmdpZnRzUHJvZHVjdHNSb3V0ZXIucG9zdCgnL3Byb2R1Y3QnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIEFkZFByb2R1Y3QocmVxLmJvZHksIHJlcyk7XG59KTtcbmdpZnRzUHJvZHVjdHNSb3V0ZXIucHV0KCcvcHJvZHVjdCcsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgVXBkYXRlUHJvZHVjdChyZXEuYm9keSwgcmVzKTtcbn0pO1xuZ2lmdHNQcm9kdWN0c1JvdXRlci5kZWxldGUoJy9wcm9kdWN0JywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICBEZWxldGVQcm9kdWN0KHJlcS5xdWVyeSwgcmVzKTtcbn0pO1xuXG5naWZ0c1Byb2R1Y3RzUm91dGVyLmdldCgnL2ludmVudG9yeScsIChyZXEsIHJlcykgPT4ge1xuICBHZXRJbnZlbnRvcnkocmVzKTtcbn0pO1xuZ2lmdHNQcm9kdWN0c1JvdXRlci5wdXQoJy9pbnZlbnRvcnknLCAocmVxLCByZXMpID0+IHtcbiAgQWRqdXN0SW52ZW50b3J5KHJlcS5ib2R5Ll9pZCwgcmVxLmJvZHkucXR5LCByZXMpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGdpZnRzUHJvZHVjdHNSb3V0ZXI7XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBPYmplY3RJRCwgRGJDb2xsZWN0aW9uIH0gZnJvbSAnLi4vbW9uZ29kYi1vcHMnO1xuXG5sZXQgZ2xvYmFsQ2F0ZWdvcmllcyA9IFtdO1xubGV0IGdsb2JhbFNhbXBsZXNPZkNhdGVnb3JpZXMgPSBbXTtcblxuYXN5bmMgZnVuY3Rpb24gR2V0Q2F0ZWdvcmllcyhyZXM6IFJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IGF3YWl0IEdldENhdGVnb3JpZXNCeUxldmVsKDApO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZChjYXRlZ29yaWVzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChlKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBHZXRTYW1wbGVzT2ZDYXRlZ29yaWVzKHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKGdsb2JhbFNhbXBsZXNPZkNhdGVnb3JpZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZChnbG9iYWxTYW1wbGVzT2ZDYXRlZ29yaWVzKTtcbiAgfVxuICB0cnkge1xuICAgIGdsb2JhbFNhbXBsZXNPZkNhdGVnb3JpZXMgPSBhd2FpdCBHZXRTYW1wbGVzKCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGdsb2JhbFNhbXBsZXNPZkNhdGVnb3JpZXMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEFkZENhdGVnb3J5KGJvZHk6IGFueSwgcmVzOiBSZXNwb25zZSkge1xuICBpZiAoIWJvZHkubmFtZSB8fCAhYm9keS5jYXRlZ29yeSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnSW52YWxpZCBpbnB1dC4nKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGJDb2xsZWN0aW9uID0gYXdhaXQgRGJDb2xsZWN0aW9uKCdnaWZ0cy1wcm9kdWN0cy1jYXRhbG9nJyk7XG4gICAgYXdhaXQgZGJDb2xsZWN0aW9uLmluc2VydE9uZSh7IG5hbWU6IGJvZHkubmFtZSwgY2F0ZWdvcnk6IGJvZHkuY2F0ZWdvcnkgfSk7XG4gICAgZ2xvYmFsQ2F0ZWdvcmllcyA9IFtdO1xuICAgIGdsb2JhbFNhbXBsZXNPZkNhdGVnb3JpZXMgPSBbXTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gRGVsZXRlQ2F0ZWdvcnkocXVlcnk6IGFueSwgcmVzOiBSZXNwb25zZSkge1xuICBpZiAoIXF1ZXJ5Ll9pZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnSW52YWxpZCBpbnB1dC4nKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGJDb2xsZWN0aW9uID0gYXdhaXQgRGJDb2xsZWN0aW9uKCdnaWZ0cy1wcm9kdWN0cy1jYXRhbG9nJyk7XG4gICAgYXdhaXQgZGJDb2xsZWN0aW9uLmRlbGV0ZU9uZSh7IF9pZDogbmV3IE9iamVjdElEKHF1ZXJ5Ll9pZCkgfSk7XG4gICAgZ2xvYmFsQ2F0ZWdvcmllcyA9IFtdO1xuICAgIGdsb2JhbFNhbXBsZXNPZkNhdGVnb3JpZXMgPSBbXTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuLy8gQGxldmVsOlxuLy8gMCAtIGFsbDsgIDEgLSAxc3QgbGV2ZWw7ICAyIC0gMm5kIGFuZCBhYm92ZSBsZXZlbHNcbmFzeW5jIGZ1bmN0aW9uIEdldENhdGVnb3JpZXNCeUxldmVsKGxldmVsOiBudW1iZXIpIHtcbiAgaWYgKGdsb2JhbENhdGVnb3JpZXMubGVuZ3RoIDw9IDApIHtcbiAgICB0cnkge1xuICAgICAgZ2xvYmFsQ2F0ZWdvcmllcyA9IGF3YWl0IEdldENhdGVnb3JpZXNGcm9tRGIoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChsZXZlbCA9PT0gMCkge1xuICAgIHJldHVybiBnbG9iYWxDYXRlZ29yaWVzO1xuICB9XG4gIGNvbnN0IHJldHVybkNhdGVnb3JpZXMgPSBbXTtcbiAgZ2xvYmFsQ2F0ZWdvcmllcy5mb3JFYWNoKGNhdCA9PiB7XG4gICAgY29uc29sZS5sb2coY2F0LmNhdGVnb3J5Lm1hdGNoKG5ldyBSZWdFeHAoJy8nLCAnZycpKSk7XG4gICAgaWYgKGNhdC5jYXRlZ29yeS5tYXRjaChuZXcgUmVnRXhwKCcvJywgJ2cnKSkubGVuZ3RoIDw9IGxldmVsKSB7XG4gICAgICByZXR1cm5DYXRlZ29yaWVzLnB1c2goY2F0KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmV0dXJuQ2F0ZWdvcmllcztcbn1cblxuYXN5bmMgZnVuY3Rpb24gR2V0Q2F0ZWdvcmllc0Zyb21EYigpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYkNvbGxlY3Rpb24gPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2dpZnRzLXByb2R1Y3RzLWNhdGFsb2cnKTtcbiAgICBnbG9iYWxDYXRlZ29yaWVzID0gYXdhaXQgZGJDb2xsZWN0aW9uXG4gICAgICAuZmluZCgpXG4gICAgICAuc29ydCgnY2F0ZWdvcnknLCAxKVxuICAgICAgLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gZ2xvYmFsQ2F0ZWdvcmllcztcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IHsgZXJyTXNnOiAnR2V0IGNhdGVnb3JpZXMgZnJvbSBkYXRhYmFzZSBmYWlsZWQuJyB9O1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEdldFNhbXBsZXMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGJDb2xsZWN0aW9uID0gYXdhaXQgRGJDb2xsZWN0aW9uKCdnaWZ0cy1wcm9kdWN0cycpO1xuICAgIGxldCBkb2NzID0gbnVsbDtcbiAgICBkb2NzID0gYXdhaXQgZGJDb2xsZWN0aW9uXG4gICAgICAuYWdncmVnYXRlKFtcbiAgICAgICAgeyAkc29ydDogeyBfaWQ6IC0xIH0gfSxcbiAgICAgICAge1xuICAgICAgICAgICRncm91cDoge1xuICAgICAgICAgICAgX2lkOiB7IGNhdGVnb3J5OiAnJGNhdGVnb3J5JyB9LFxuICAgICAgICAgICAgcHJvZHVjdHM6IHtcbiAgICAgICAgICAgICAgJHB1c2g6IHtcbiAgICAgICAgICAgICAgICBfaWQ6ICckX2lkJyxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJyRjYXRlZ29yeScsXG4gICAgICAgICAgICAgICAgaW1nOiAnJGltZydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICRwcm9qZWN0OiB7XG4gICAgICAgICAgICBfaWQ6ICckX2lkJyxcbiAgICAgICAgICAgIHByb2R1Y3RzOiB7XG4gICAgICAgICAgICAgICRzbGljZTogW1xuICAgICAgICAgICAgICAgICckcHJvZHVjdHMnLFxuICAgICAgICAgICAgICAgIDQgLy8gbWF4IG51bWJlciBvZiBlbGVtZW50cyByZXR1cm5lZCBmcm9tIHRoZSBzdGFydCBvZiB0aGUgYXJyYXlcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXSlcbiAgICAgIC50b0FycmF5KCk7XG4gICAgcmV0dXJuIGRvY3M7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgICByZXR1cm4geyBlcnJNc2c6ICdHZXQgcHJvZHVjdHMgZmFpbGVkLicgfTtcbiAgfVxufVxuXG5leHBvcnQgeyBBZGRDYXRlZ29yeSwgRGVsZXRlQ2F0ZWdvcnksIEdldENhdGVnb3JpZXMsIEdldFNhbXBsZXNPZkNhdGVnb3JpZXMgfTtcbiIsImltcG9ydCB7IERiQ29sbGVjdGlvbiwgTW9uZ29EYiwgT2JqZWN0SUQgfSBmcm9tICcuLi9tb25nb2RiLW9wcyc7XG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5cbmFzeW5jIGZ1bmN0aW9uIEdldFByb2R1Y3QocGFyYW1zOiBhbnksIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKCFwYXJhbXMuX2lkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIHByb2R1Y3Qgbm8uJyk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgTW9uZ29EYigpO1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oJ2dpZnRzLXByb2R1Y3RzJylcbiAgICAgIC5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SUQocGFyYW1zLl9pZCkgfSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHByb2R1Y3QpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEdldFByb2R1Y3RzQnlDYXRlZ29yeShyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYkNvbGxlY3Rpb24gPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2dpZnRzLXByb2R1Y3RzJyk7XG4gICAgbGV0IGRvY3MgPSBudWxsO1xuICAgIGlmIChyZXEucXVlcnkuY2F0ZWdvcnkpIHtcbiAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChbJ14nLCByZXEucXVlcnkuY2F0ZWdvcnkudHJpbSgpXS5qb2luKCcnKSwgJ2knKTtcbiAgICAgIGRvY3MgPSBhd2FpdCBkYkNvbGxlY3Rpb24uZmluZCh7IGNhdGVnb3J5OiByZWdleCB9KS50b0FycmF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3MgPSBhd2FpdCBkYkNvbGxlY3Rpb24uZmluZCgpLnRvQXJyYXkoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGRvY3MpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEFkZFByb2R1Y3QoYm9keTogYW55LCByZXM6IFJlc3BvbnNlKSB7XG4gIGlmICghYm9keS5uYW1lKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIGlucHV0LicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IE1vbmdvRGIoKTtcbiAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCdnaWZ0cy1wcm9kdWN0cycpLmluc2VydE9uZSh7XG4gICAgICBuYW1lOiBib2R5Lm5hbWUsXG4gICAgICBpbWc6IGJvZHkuaW1nLFxuICAgICAgcHJpY2U6IGJvZHkucHJpY2UsXG4gICAgICBjYXRlZ29yeTogYm9keS5jYXRlZ29yeSxcbiAgICAgIGNvbG9yOiBib2R5LmNvbG9yLFxuICAgICAgcGFja2FnaW5nOiBib2R5LnBhY2thZ2luZyxcbiAgICAgIG1hdGVyaWFsOiBib2R5Lm1hdGVyaWFsLFxuICAgICAgc2l6ZTogYm9keS5zaXplLFxuICAgICAgbm90ZTogYm9keS5ub3RlLFxuICAgICAgcmV0YWlsZXI6IGJvZHkucmV0YWlsZXIsXG4gICAgICBjcmVhdGVkT246IG5ldyBEYXRlKClcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gVXBkYXRlUHJvZHVjdChib2R5OiBhbnksIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKCFib2R5Ll9pZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnSW52YWxpZCBpbnB1dC4nKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGJQcm9kdWN0cyA9IGF3YWl0IERiQ29sbGVjdGlvbignZ2lmdHMtcHJvZHVjdHMnKTtcbiAgICBhd2FpdCBkYlByb2R1Y3RzLnVwZGF0ZU9uZShcbiAgICAgIHsgX2lkOiBuZXcgT2JqZWN0SUQoYm9keS5faWQpIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHtcbiAgICAgICAgICBtb2RpZmllZE9uOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIG5hbWU6IGJvZHkubmFtZSxcbiAgICAgICAgICBpbWc6IGJvZHkuaW1nLFxuICAgICAgICAgIHByaWNlOiBib2R5LnByaWNlLFxuICAgICAgICAgIGNhdGVnb3J5OiBib2R5LmNhdGVnb3J5LFxuICAgICAgICAgIGNvbG9yOiBib2R5LmNvbG9yLFxuICAgICAgICAgIHBhY2thZ2luZzogYm9keS5wYWNrYWdpbmcsXG4gICAgICAgICAgbWF0ZXJpYWw6IGJvZHkubWF0ZXJpYWwsXG4gICAgICAgICAgc2l6ZTogYm9keS5zaXplLFxuICAgICAgICAgIG5vdGU6IGJvZHkubm90ZSxcbiAgICAgICAgICByZXRhaWxlcjogYm9keS5yZXRhaWxlclxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gRGVsZXRlUHJvZHVjdChxdWVyeTogYW55LCByZXM6IFJlc3BvbnNlKSB7XG4gIGlmICghcXVlcnkuX2lkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIGlucHV0LicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IE1vbmdvRGIoKTtcbiAgICBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oJ2dpZnRzLXByb2R1Y3RzJylcbiAgICAgIC5kZWxldGVPbmUoeyBfaWQ6IG5ldyBPYmplY3RJRChxdWVyeS5faWQpIH0pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHJlc3VsdDogJ29rJyB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChlKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBBZGRQcm9kdWN0LFxuICBEZWxldGVQcm9kdWN0LFxuICBHZXRQcm9kdWN0c0J5Q2F0ZWdvcnksXG4gIEdldFByb2R1Y3QsXG4gIFVwZGF0ZVByb2R1Y3Rcbn07XG4iLCJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcblxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuXG5jb25zdCBnaWZ0c09yZGVyc1JvdXRlciA9IFJvdXRlcigpO1xuXG4vLyBvcmRlciBsaXN0IHdpdGggb3JkZXJfbm8sIHN0YXR1cyAmIHN0YWZmIGlkIHRvIGZvbGxvdy11cC5cbmdpZnRzT3JkZXJzUm91dGVyLmdldCgnL2FsbE9yZGVycycsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgaWYgKCFyZXEuc2Vzc2lvbiB8fCAhcmVxLnNlc3Npb24uc3RhZmYpIHtcbiAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNDAxKTtcbiAgfVxuICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG59KTtcblxuLy8gdXBkYXRlIG9yZGVyIHN0YXR1cyBieSBzdGFmZiBmb2xsb3ctdXAuXG5naWZ0c09yZGVyc1JvdXRlci5wdXQoJy91cGRhdGVTdGF0dXMnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIGlmICghcmVxLnNlc3Npb24gfHwgIXJlcS5zZXNzaW9uLnN0YWZmLmlkKSB7XG4gICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDQwMSk7XG4gIH1cbiAgaWYgKCFyZXEuYm9keS5uZXdfc3RhdHVzIHx8ICFyZXEuYm9keS5zbm8gfHwgIXJlcS5ib2R5Lm9yZGVyX25vKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdGYWlsZWQuIFBsZWFlcyByZXZpZXcgaW5wdXRzLicpO1xuICB9XG5cbiAgY29uc3QgcGFyYW0gPSB7XG4gICAgMTogcmVxLmJvZHkub3JkZXJfbm8sXG4gICAgMjogcmVxLmJvZHkuc25vLFxuICAgIDM6IERhdGUubm93KCksXG4gICAgNDogcmVxLnNlc3Npb24uc3RhZmYuaWQsXG4gICAgNTogcmVxLmJvZHkubmV3X3N0YXR1cyxcbiAgICA2OiByZXEuYm9keS5ub3RlIHx8IG51bGxcbiAgfTtcbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgcmVzdWx0OiAnb2snIH0pO1xufSk7XG5cbi8vIHN0YWZmIHRvIHVwZGF0ZSBjb250YWN0IGluZm8gb2YgdGhlIG9yZGVyLlxuZ2lmdHNPcmRlcnNSb3V0ZXIucHV0KCcvdXBkYXRlQ29udGFjdCcsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgaWYgKCFyZXEuc2Vzc2lvbiB8fCAhcmVxLnNlc3Npb24uc3RhZmYuaWQpIHtcbiAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNDAxKTtcbiAgfVxuICBpZiAoIXJlcS5ib2R5Lm9yZGVyX25vKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdPcmRlcl9ubyBlbXB0eS4nKTtcbiAgfSBlbHNlIGlmIChcbiAgICAhcmVxLmJvZHkuZW1haWwgfHxcbiAgICAhcmVxLmJvZHkuZW1haWwuaW5jbHVkZXMoJ0AnKSB8fFxuICAgICFyZXEuYm9keS5lbWFpbC5pbmNsdWRlcygnLicpIHx8XG4gICAgcmVxLmJvZHkuZW1haWwuaW5jbHVkZXMoJy8nKSB8fFxuICAgIHJlcS5ib2R5LmVtYWlsLmluY2x1ZGVzKCdcXFxcJylcbiAgKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIGVtYWlsLicpO1xuICB9IGVsc2UgaWYgKCFyZXEuYm9keS5uYW1lKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIG5hbWUuJyk7XG4gIH1cblxuICBjb25zdCBwYXJhbSA9IHtcbiAgICAxOiByZXEuYm9keS5uYW1lLFxuICAgIDI6IHJlcS5ib2R5LmVtYWlsLFxuICAgIDM6IHJlcS5ib2R5Lm1vYmlsZSB8fCBudWxsLFxuICAgIDQ6IHJlcS5ib2R5LmNvbXBhbnkgfHwgbnVsbCxcbiAgICA1OiByZXEuYm9keS5tb2JpbGUyIHx8IG51bGwsXG4gICAgNjogcmVxLmJvZHkuYWRkciB8fCBudWxsLFxuICAgIDc6IHJlcS5ib2R5Lm9yZGVyX25vXG4gIH07XG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHJlc3VsdDogJ29rJyB9KTtcbn0pO1xuXG4vLyBzdGFmZiB0byBjaGFuZ2Ugb3JkZXIgZGV0YWlscyBlLmcuIHByaWNlLCBxdHksIGluIGNhc2UgdXNlcnMgY2hhbmdlZCBtaW5kLlxuLy8gc3RhZmYgbWF5IGNoYW5nZSBzdGF0dXMgb2Ygc3BlY2lmaWMgcHJvZHVjdCBvZiB0aGUgb3JkZXIuXG5naWZ0c09yZGVyc1JvdXRlci5wdXQoJy91cGRhdGVPcmRlckl0ZW0nLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIGlmICghcmVxLnNlc3Npb24gfHwgIXJlcS5zZXNzaW9uLnN0YWZmLmlkKSB7XG4gICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDQwMSk7XG4gIH1cblxuICBpZiAoIXJlcS5ib2R5Lm9yZGVyX25vKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdGYWlsZWQuIEludmFsaWQgT3JkZXIgTm8uJyk7XG4gIH1cbiAgaWYgKCFyZXEuYm9keS5zbm8gfHwgcmVxLmJvZHkuc25vID09PSAnJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnRmFpbGVkLiBJbnZhbGlkIE9yZGVyIFNuby4nKTtcbiAgfVxuXG4gIGNvbnN0IHBhcmFtID0ge1xuICAgIDE6IHJlcS5ib2R5Lm5ld19zYWxlX3ByaWNlLFxuICAgIDI6IHJlcS5ib2R5Lm5ld19xdHksXG4gICAgMzogcmVxLmJvZHkubmV3X3N0YXR1cyxcbiAgICA0OiByZXEuYm9keS5vcmRlcl9ubyxcbiAgICA1OiByZXEuYm9keS5zbm9cbiAgfTtcbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgcmVzdWx0OiAnb2snIH0pO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGdpZnRzT3JkZXJzUm91dGVyO1xuIiwiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5cbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7XG4gIExvZ2luLFxuICBMb2dvdXQsXG4gIFJlZ2lzdGVyLFxuICBEZWxldGVVc2VyLFxuICBVc2VySW5mb1xufSBmcm9tICcuL2dpZnRzLXVzZXJzLm9wcyc7XG5pbXBvcnQge1xuICBBZGRUb0NhcnQsXG4gIENhcnRDaGVja291dCxcbiAgRGVsZXRlQ2FydCxcbiAgRGVsZXRlSW5DYXJ0LFxuICBHZXRDYXJ0LFxuICBVcGRhdGVDYXJ0UXR5XG59IGZyb20gJy4vZ2lmdHMtY2FydHMub3BzJztcblxuY29uc3QgZ2lmdHNVc2Vyc1JvdXRlciA9IFJvdXRlcigpO1xuXG4vLyB1cmw6IC9hcGkvZ2lmdHMvdXNlcnMvXG5naWZ0c1VzZXJzUm91dGVyLnBvc3QoJy9sb2dpbicsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgTG9naW4ocmVxLCByZXMpO1xufSk7XG5naWZ0c1VzZXJzUm91dGVyLmdldCgnL2luZm8nLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIFVzZXJJbmZvKHJlcS5zZXNzaW9uLCByZXMpO1xufSk7XG5naWZ0c1VzZXJzUm91dGVyLmdldCgnL2xvZ291dCcsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgTG9nb3V0KHJlcSwgcmVzKTtcbn0pO1xuZ2lmdHNVc2Vyc1JvdXRlci5wb3N0KCcvcmVnaXN0ZXInLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIFJlZ2lzdGVyKHJlcSwgcmVzKTtcbn0pO1xuZ2lmdHNVc2Vyc1JvdXRlci5kZWxldGUoJy9kZWxldGV1c2VyJywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICBEZWxldGVVc2VyKHJlcS5zZXNzaW9uLCByZXMpO1xufSk7XG5naWZ0c1VzZXJzUm91dGVyLmdldCgnL2NhcnQnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIEdldENhcnQocmVxLnNlc3Npb24sIHJlcyk7XG59KTtcbmdpZnRzVXNlcnNSb3V0ZXIucG9zdCgnL2NhcnQnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIEFkZFRvQ2FydChyZXEuc2Vzc2lvbiwgcmVxLmJvZHksIHJlcyk7XG59KTtcbmdpZnRzVXNlcnNSb3V0ZXIuZGVsZXRlKCcvY2FydCcsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgRGVsZXRlQ2FydChyZXEuc2Vzc2lvbiwgcmVzKTtcbn0pO1xuZ2lmdHNVc2Vyc1JvdXRlci5wdXQoJy9jYXJ0JywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICBVcGRhdGVDYXJ0UXR5KHJlcSwgcmVzKTtcbn0pO1xuZ2lmdHNVc2Vyc1JvdXRlci5kZWxldGUoJy9jYXJ0L3Byb2R1Y3QnLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIERlbGV0ZUluQ2FydChyZXEuc2Vzc2lvbiwgcmVxLnF1ZXJ5Ll9pZCwgcmVzKTtcbn0pO1xuZ2lmdHNVc2Vyc1JvdXRlci5wb3N0KCcvY2FydC9jaGVja291dCcsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgQ2FydENoZWNrb3V0KHJlcSwgcmVzKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBnaWZ0c1VzZXJzUm91dGVyO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY3J5cHRvXCIpOyIsImltcG9ydCB7IERiQ29sbGVjdGlvbiwgTW9uZ29EYiwgT2JqZWN0SUQgfSBmcm9tICcuLi9tb25nb2RiLW9wcyc7XG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyByYW5kb21TdHJpbmcgfSBmcm9tICcuLi9zdHJpbmctb3BzJztcblxuaW1wb3J0IHsgYkxvZ2luIH0gZnJvbSAnLi9naWZ0cy11c2Vycy5vcHMnO1xuaW1wb3J0IHsgQ2FydEl0ZW0gfSBmcm9tICcuL3VzZXJzLWludGVyZmFjZSc7XG5pbXBvcnQge1xuICBEZWxldGVJbnZlbnRvcnlSZXNlcnZhdGlvbixcbiAgUmVzZXJ2ZUludmVudG9yeVxufSBmcm9tICcuLi9naWZ0cy1wcm9kdWN0cy9naWZ0cy1wcm9kdWN0cy1pbnZlbnRvcnkub3BzJztcbmltcG9ydCB7IE5ld09yZGVyIH0gZnJvbSAnLi4vZ2lmdHMtb3JkZXJzL2dpZnRzLW9yZGVycy5vcHMnO1xuXG5hc3luYyBmdW5jdGlvbiBHZXRDYXJ0KHNlc3Npb246IGFueSwgcmVzOiBSZXNwb25zZSkge1xuICBpZiAoIWJMb2dpbihzZXNzaW9uKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZCgnVXNlciBub3QgbG9naW4nKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBEYkNvbGxlY3Rpb24oJ2dpZnRzLWNhcnRzJyk7XG4gICAgY29uc3QgY2FydCA9IGF3YWl0IGRiLmZpbmRPbmUoeyBfaWQ6IG5ldyBPYmplY3RJRChzZXNzaW9uLnVzZXIuX2lkKSB9KTtcbiAgICBjb25zb2xlLmxvZyhjYXJ0KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoY2FydCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gQWRkVG9DYXJ0KHNlc3Npb246IGFueSwgYm9keTogYW55LCByZXM6IFJlc3BvbnNlKSB7XG4gIGlmICghYkxvZ2luKHNlc3Npb24pKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5zZW5kKCdVc2VyIG5vdCBsb2dpbicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IERiQ29sbGVjdGlvbignZ2lmdHMtY2FydHMnKTtcbiAgICBsZXQgcnNsdCA9IGF3YWl0IGRiLnVwZGF0ZU9uZShcbiAgICAgIHsgX2lkOiBuZXcgT2JqZWN0SUQoc2Vzc2lvbi51c2VyLl9pZCkgfSxcbiAgICAgIHsgJHB1bGw6IHsgcHJvZHVjdHM6IHsgcHJvZHVjdElkOiBuZXcgT2JqZWN0SUQoYm9keS5wcm9kdWN0Ll9pZCkgfSB9IH1cbiAgICApO1xuICAgIHJzbHQgPSBhd2FpdCBkYi51cGRhdGVPbmUoXG4gICAgICB7IF9pZDogbmV3IE9iamVjdElEKHNlc3Npb24udXNlci5faWQpIH0sXG4gICAgICB7XG4gICAgICAgICRwdXNoOiB7XG4gICAgICAgICAgcHJvZHVjdHM6IHtcbiAgICAgICAgICAgIHByb2R1Y3RJZDogbmV3IE9iamVjdElEKGJvZHkucHJvZHVjdC5faWQpLFxuICAgICAgICAgICAgcXVhbnRpdHk6IGJvZHkucXR5LFxuICAgICAgICAgICAgbmFtZTogYm9keS5wcm9kdWN0Lm5hbWUsXG4gICAgICAgICAgICBwcmljZTogYm9keS5wcm9kdWN0LnByaWNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyB1cHNlcnQ6IHRydWUgfVxuICAgICk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgcmVzdWx0OiAnb2snIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFVwZGF0ZUNhcnRRdHkocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4gIGlmICghYkxvZ2luKHJlcS5zZXNzaW9uKSkge1xuICAgIHJlcy5zdGF0dXMoNDAzKS5zZW5kKCdVc2VyIG5vdCBsb2dpbi4nKTtcbiAgfVxuICBpZiAoIXJlcS5ib2R5LnByb2R1Y3RJZCB8fCAhcmVxLmJvZHkucXR5KSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIGlucHV0LicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IE1vbmdvRGIoKTtcbiAgICBjb25zdCByc2x0ID0gYXdhaXQgZGIuY29sbGVjdGlvbignZ2lmdHMtY2FydHMnKS51cGRhdGVPbmUoXG4gICAgICB7XG4gICAgICAgIF9pZDogcmVxLnNlc3Npb24udXNlci5faWQsXG4gICAgICAgICdwcm9kdWN0cy5wcm9kdWN0SWQnOiByZXEuYm9keS5wcm9kdWN0SWRcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHtcbiAgICAgICAgICAncHJvZHVjdHMuJC5xdHknOiByZXEuYm9keS5xdHksXG4gICAgICAgICAgbW9kaWZpZWRPbjogbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gRGVsZXRlQ2FydChzZXNzaW9uOiBhbnksIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKCFiTG9naW4oc2Vzc2lvbikpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ1VzZXIgbm90IGxvZ2luLicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IERiQ29sbGVjdGlvbignZ2lmdHMtY2FydHMnKTtcbiAgICBkYi5kZWxldGVPbmUoeyBfaWQ6IG5ldyBPYmplY3RJRChzZXNzaW9uLnVzZXIuX2lkKSB9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyByZXN1bHQ6ICdvaycgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gRGVsZXRlSW5DYXJ0KHNlc3Npb246IGFueSwgX2lkOiBzdHJpbmcsIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKCFiTG9naW4oc2Vzc2lvbikpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ1VzZXIgbm90IGxvZ2luLicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IERiQ29sbGVjdGlvbignZ2lmdHMtY2FydHMnKTtcbiAgICBsZXQgcnNsdCA9IGF3YWl0IGRiLnVwZGF0ZU9uZShcbiAgICAgIHsgX2lkOiBuZXcgT2JqZWN0SUQoc2Vzc2lvbi51c2VyLl9pZCkgfSxcbiAgICAgIHsgJHB1bGw6IHsgcHJvZHVjdHM6IHsgcHJvZHVjdElkOiBuZXcgT2JqZWN0SUQoX2lkKSB9IH0gfVxuICAgICk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgcmVzdWx0OiAnb2snIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIENhcnRDaGVja291dChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgaWYgKFxuICAgICFyZXEuYm9keS5jYXJ0IHx8XG4gICAgIXJlcS5ib2R5LmNhcnQuY3VzdG9tZXIgfHxcbiAgICAhcmVxLmJvZHkuY2FydC5jdXN0b21lci5uYW1lIHx8XG4gICAgIXJlcS5ib2R5LmNhcnQuY3VzdG9tZXIubW9iaWxlIHx8XG4gICAgIXJlcS5ib2R5LmNhcnQuY3VzdG9tZXIuYWRkcmVzc1xuICApIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ0ludmFsaWQgY3VzdG9tZXIgaW5mb3JtYXRpb24uJyk7XG4gIH1cbiAgaWYgKHJlcS5ib2R5LmNhcnQudG90YWwgPD0gMCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnTm8gcHJvZHVjdCB0byBjaGVja291dC4nKTtcbiAgfVxuXG4gIGxldCBiTWVtYmVyOiBib29sZWFuID0gYkxvZ2luKHJlcS5zZXNzaW9uKTtcblxuICBsZXQgaWQgPSAnJztcbiAgaWYgKGJNZW1iZXIpIHtcbiAgICBpZCA9IHJlcS5zZXNzaW9uLnVzZXIuX2lkO1xuICB9IGVsc2Uge1xuICAgIGlkID0gcmFuZG9tU3RyaW5nKDIwKTtcbiAgfVxuICBjb25zdCBjYXJ0SXRlbXM6IENhcnRJdGVtW10gPSByZXEuYm9keS5jYXJ0LmNhcnRJdGVtcztcbiAgY29uc3QgY3VzdG9tZXIgPSByZXEuYm9keS5jYXJ0LmN1c3RvbWVyO1xuXG4gIHRyeSB7XG4gICAgLy8gcmVzZXJ2ZSBpbnZlbnRvcnksIGl0IHRocm93IGVycm9yIGluIGNhc2Ugb2YgZmFpbHVyZS5cbiAgICBhd2FpdCBSZXNlcnZlSW52ZW50b3J5KGlkLCBjYXJ0SXRlbXMpO1xuXG4gICAgbGV0IGluc2VydFJzbHQgPSBhd2FpdCBOZXdPcmRlcihjdXN0b21lciwgY2FydEl0ZW1zKTtcbiAgICBpZiAoaW5zZXJ0UnNsdC5yZXN1bHQubiA8PSAwKSB7XG4gICAgICBhd2FpdCBEZWxldGVJbnZlbnRvcnlSZXNlcnZhdGlvbihpZCk7XG4gICAgICB0aHJvdyAnQ3JlYXRlIG5ldyBvcmRlciBmYWlsZWQuJztcbiAgICB9XG5cbiAgICBsZXQgdXBkYXRlUnNsdCA9IGF3YWl0IERlbGV0ZUludmVudG9yeVJlc2VydmF0aW9uKGlkKTtcbiAgICBjb25zb2xlLmxvZyh1cGRhdGVSc2x0KTtcblxuICAgIGlmIChiTWVtYmVyKSB7XG4gICAgICBjb25zdCBkYkNhcnRzID0gYXdhaXQgRGJDb2xsZWN0aW9uKCdnaWZ0cy1jYXJ0cycpO1xuICAgICAgbGV0IGRlbGV0ZVJzbHQgPSBhd2FpdCBkYkNhcnRzLmRlbGV0ZU9uZSh7IF9pZDogbmV3IE9iamVjdElEKGlkKSB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyBvcmRlcklkOiBpZCB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIEFkZFRvQ2FydCxcbiAgQ2FydENoZWNrb3V0LFxuICBEZWxldGVDYXJ0LFxuICBEZWxldGVJbkNhcnQsXG4gIEdldENhcnQsXG4gIFVwZGF0ZUNhcnRRdHlcbn07XG4iLCJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBEYkNvbGxlY3Rpb24sIE9iamVjdElEIH0gZnJvbSAnLi4vbW9uZ29kYi1vcHMnO1xuaW1wb3J0IHsgYkxvZ2luIH0gZnJvbSAnLi4vZ2lmdHMtdXNlcnMvZ2lmdHMtdXNlcnMub3BzJztcbmltcG9ydCB7IENhcnRJdGVtIH0gZnJvbSAnLi4vZ2lmdHMtdXNlcnMvdXNlcnMtaW50ZXJmYWNlJztcblxuYXN5bmMgZnVuY3Rpb24gTmV3T3JkZXIoY3VzdG9tZXIsIGNhcnRJdGVtczogQ2FydEl0ZW1bXSkge1xuICB0cnkge1xuICAgIGNvbnN0IGRiT3JkZXJzID0gYXdhaXQgRGJDb2xsZWN0aW9uKCdnaWZ0cy1vcmRlcnMnKTtcbiAgICBsZXQgaW5zZXJ0UnNsdCA9IGRiT3JkZXJzLmluc2VydE9uZSh7XG4gICAgICBjcmVhdGVkX29uOiBuZXcgRGF0ZSgpLFxuICAgICAgc2hpcHBpbmc6IHtcbiAgICAgICAgbmFtZTogY3VzdG9tZXIubmFtZSxcbiAgICAgICAgbW9iaWxlOiBjdXN0b21lci5tb2JpbGUsXG4gICAgICAgIGFkZHJlc3M6IGN1c3RvbWVyLmFkZHJlc3MsXG4gICAgICAgIG1lc3NhZ2U6IGN1c3RvbWVyLm1lc3NhZ2VcbiAgICAgIH0sXG4gICAgICBwYXltZW50OiB7IG1ldGhvZDogJ3Zpc2EnLCB0cmFuc2FjdGlvbl9pZDogJzIzMTIyMTMzMTJYWFhURCcgfSxcbiAgICAgIGNhcnRJdGVtczogY2FydEl0ZW1zXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ2luc2VydFJzbHQ6ICcsIGluc2VydFJzbHQpO1xuICAgIHJldHVybiBpbnNlcnRSc2x0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgJ2NyZWF0ZSBuZXcgb3JkZXIgZmFpbGVkLic7XG4gIH1cbn1cbi8vIGFzeW5jIGZ1bmN0aW9uIEdldENhcnQocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4vLyAgIGlmICghYkxvZ2luKHJlcS5zZXNzaW9uKSkge1xuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZCgnVXNlciBub3QgbG9naW4nKTtcbi8vICAgfVxuXG4vLyAgIHRyeSB7XG4vLyAgICAgY29uc3QgZGIgPSBhd2FpdCBNb25nb0RiKCk7XG4vLyAgICAgbGV0IGNhcnQgPSBhd2FpdCBkYlxuLy8gICAgICAgLmNvbGxlY3Rpb24oJ2dpZnRzLWNhcnRzJylcbi8vICAgICAgIC5maW5kKHsgX2lkOiByZXEuc2Vzc2lvbi51c2VyWzBdLl9pZCB9KVxuLy8gICAgICAgLnRvQXJyYXkoKTtcblxuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZChjYXJ0KTtcbi8vICAgfSBjYXRjaCAoZSkge1xuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChlKTtcbi8vICAgfVxuLy8gfVxuXG4vLyBhc3luYyBmdW5jdGlvbiBVcGRhdGVDYXJ0UXR5KHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xuLy8gICBpZiAoIWJMb2dpbihyZXEuc2Vzc2lvbikpIHtcbi8vICAgICByZXMuc3RhdHVzKDQwMykuc2VuZCgnVXNlciBub3QgbG9naW4uJyk7XG4vLyAgIH1cbi8vICAgaWYgKCFyZXEuYm9keS5wcm9kdWN0SWQgfHwgIXJlcS5ib2R5LnF1YW50aXR5KSB7XG4vLyAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdJbnZhbGlkIGlucHV0LicpO1xuLy8gICB9XG5cbi8vICAgdHJ5IHtcbi8vICAgICBjb25zdCBkYiA9IGF3YWl0IE1vbmdvRGIoKTtcbi8vICAgICBsZXQgcnNsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2dpZnRzLWNhcnRzJykudXBkYXRlT25lKFxuLy8gICAgICAge1xuLy8gICAgICAgICBfaWQ6IHJlcS5zZXNzaW9uLnVzZXJbMF0uX2lkLFxuLy8gICAgICAgICAncHJvZHVjdHMucHJvZHVjdElkJzogcmVxLmJvZHkucHJvZHVjdElkXG4vLyAgICAgICB9LFxuLy8gICAgICAge1xuLy8gICAgICAgICAkc2V0OiB7XG4vLyAgICAgICAgICAgJ3Byb2R1Y3RzLiQucXVhbnRpdHknOiByZXEuYm9keS5xdWFudGl0eSxcbi8vICAgICAgICAgICBtb2RpZmllZE9uOiBuZXcgRGF0ZSgpXG4vLyAgICAgICAgIH1cbi8vICAgICAgIH1cbi8vICAgICApO1xuLy8gICAgIGNvbnNvbGUubG9nKHJzbHQpO1xuLy8gICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDApO1xuLy8gICB9IGNhdGNoIChlKSB7XG4vLyAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuLy8gICB9XG4vLyB9XG5cbi8vIGFzeW5jIGZ1bmN0aW9uIERlbGV0ZUNhcnQocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4vLyAgIGlmICghYkxvZ2luKHJlcS5zZXNzaW9uKSkge1xuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnVXNlciBub3QgbG9naW4uJyk7XG4vLyAgIH1cblxuLy8gICB0cnkge1xuLy8gICAgIGNvbnN0IGRiID0gYXdhaXQgTW9uZ29EYigpO1xuLy8gICAgIGF3YWl0IGRiXG4vLyAgICAgICAuY29sbGVjdGlvbignZ2lmdHMtY2FydHMnKVxuLy8gICAgICAgLmRlbGV0ZU9uZSh7IF9pZDogcmVxLnNlc3Npb24udXNlclswXS5faWQgfSk7XG4vLyAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDIwMCk7XG4vLyAgIH0gY2F0Y2ggKGUpIHtcbi8vICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4vLyAgIH1cbi8vIH1cblxuLy8gYXN5bmMgZnVuY3Rpb24gRGVsZXRlQ2FydFByb2R1Y3QocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4vLyAgIGlmICghYkxvZ2luKHJlcS5zZXNzaW9uKSkge1xuLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnVXNlciBub3QgbG9naW4uJyk7XG4vLyAgIH1cblxuLy8gICB0cnkge1xuLy8gICAgIGNvbnN0IGRiID0gYXdhaXQgTW9uZ29EYigpO1xuLy8gICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2dpZnRzLWNhcnRzJykudXBkYXRlT25lKFxuLy8gICAgICAgeyBfaWQ6IHJlcS5zZXNzaW9uLnVzZXJbMF0uX2lkIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgICRzZXQ6IHsgbW9kaWZpZWRPbjogbmV3IERhdGUoKSB9LFxuLy8gICAgICAgICAkcHVsbDoge1xuLy8gICAgICAgICAgIHByb2R1Y3RzOiB7XG4vLyAgICAgICAgICAgICBwcm9kdWN0SWQ6IHJlcS5ib2R5LnByb2R1Y3RJZCxcbi8vICAgICAgICAgICAgIHF1YW50aXR5OiByZXEuYm9keS5xdWFudGl0eVxuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgfVxuLy8gICAgICk7XG4vLyAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDIwMCk7XG4vLyAgIH0gY2F0Y2ggKGUpIHtcbi8vICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZSk7XG4vLyAgIH1cbi8vIH1cblxuLy8gYXN5bmMgZnVuY3Rpb24gQ2FydENoZWNrb3V0KHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xuLy8gICBpZiAoIWJMb2dpbihyZXEuc2Vzc2lvbikpIHtcbi8vICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ1VzZXIgbm90IGxvZ2luLicpO1xuLy8gICB9XG5cbi8vICAgdHJ5IHtcbi8vICAgICBjb25zdCBkYiA9IGF3YWl0IE1vbmdvRGIoKTtcbi8vICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCdnaWZ0cy1jYXJ0cycpLnVwZGF0ZU9uZShcbi8vICAgICAgIHsgX2lkOiByZXEuc2Vzc2lvbi51c2VyWzBdLl9pZCB9LFxuLy8gICAgICAge1xuLy8gICAgICAgICAkc2V0OiB7IG1vZGlmaWVkT246IG5ldyBEYXRlKCkgfSxcbi8vICAgICAgICAgJHB1bGw6IHtcbi8vICAgICAgICAgICBwcm9kdWN0czoge1xuLy8gICAgICAgICAgICAgcHJvZHVjdElkOiByZXEuYm9keS5wcm9kdWN0SWQsXG4vLyAgICAgICAgICAgICBxdWFudGl0eTogcmVxLmJvZHkucXVhbnRpdHlcbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICAgIH1cbi8vICAgICApO1xuLy8gICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDApO1xuLy8gICB9IGNhdGNoIChlKSB7XG4vLyAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGUpO1xuLy8gICB9XG4vLyB9XG5cbi8vIGV4cG9ydCB7IERlbGV0ZUNhcnQsIERlbGV0ZUNhcnRQcm9kdWN0LCBHZXRDYXJ0LCBVcGRhdGVDYXJ0UXR5IH07XG5leHBvcnQgeyBOZXdPcmRlciB9O1xuIiwiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5cbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcblxuY29uc3QgZ2lmdHNTdGFmZnNSb3V0ZXIgPSBSb3V0ZXIoKTtcblxuZ2lmdHNTdGFmZnNSb3V0ZXIucG9zdCgnL2xvZ2luJywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICAvLyBMb2dpbihyZXEsIHJlcyk7XG59KTtcbmdpZnRzU3RhZmZzUm91dGVyLmdldCgnL2xvZ291dCcsIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgLy8gTG9nb3V0KHJlcSwgcmVzKTtcbn0pO1xuZ2lmdHNTdGFmZnNSb3V0ZXIucG9zdCgnL3JlZ2lzdGVyJywgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICAvLyBSZWdpc3RlcihyZXEsIHJlcyk7XG59KTtcbmdpZnRzU3RhZmZzUm91dGVyLmRlbGV0ZSgnL2RlbGV0ZXVzZXInLCAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIC8vIERlbGV0ZVVzZXIocmVxLCByZXMpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGdpZnRzU3RhZmZzUm91dGVyO1xuIiwiaW1wb3J0IHsgY3JlYXRlVHJhbnNwb3J0IH0gZnJvbSAnbm9kZW1haWxlcic7XG5cbmltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcblxuY29uc3Qgb3V0bG9va190cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydCh7XG4gIHNlcnZpY2U6ICdvdXRsb29rJyxcbiAgYXV0aDoge1xuICAgIHVzZXI6ICd5dWFuY2hhb0BvdXRsb29rLnNnJyxcbiAgICBwYXNzOiAncGluZ21lSEM4MydcbiAgfVxufSk7XG5cbmNvbnN0IG91dGxvb2tfbWFpbE9wdGlvbnMgPSB7XG4gIGZyb206ICd5dWFuY2hhb0BvdXRsb29rLnNnJyxcbiAgdG86ICdzZWVzZWEyQGdtYWlsLmNvbScsXG4gIHN1YmplY3Q6IG51bGwsXG4gIGh0bWw6IG51bGxcbn07XG5cbmZ1bmN0aW9uIFNlbmRFbWFpbChib2R5OiBhbnksIHJlczogUmVzcG9uc2UpIHtcbiAgY29uc3QgZW1haWxIdG1sOiBzdHJpbmcgPVxuICAgICc8IURPQ1RZUEUgaHRtbD48aGVhZD4nICtcbiAgICAnPG1ldGEgaHR0cC1lcXVpdj1cImNvbnRlbnQtdHlwZVwiIGNvbnRlbnQ9XCJ0ZXh0L2h0bWw7Y2hhcnNldD1VVEYtOFwiPjwvaGVhZD4nICtcbiAgICBgPGJvZHk+PGJyPjxiPk1lc3NhZ2UgZnJvbSBVc2VyICR7Ym9keS5uYW1lfWAgK1xuICAgICcgOjwvYj48YnI+PGJyPicgK1xuICAgIGA8cD48Yj5FbWFpbDogPC9iPiAke2JvZHkuZW1haWx9YCArXG4gICAgJzwvcD4nICtcbiAgICBgPHA+PGI+TW9iaWxlOiA8L2I+ICR7Ym9keS5tb2JpbGV9YCArXG4gICAgJzwvcD4nICtcbiAgICBgPHA+PGI+TWVzc2FnZTogPC9iPiAke2JvZHkubWVzc2FnZX1gICtcbiAgICAnPC9wPicgK1xuICAgICc8L2JvZHk+PC9odG1sPic7XG5cbiAgb3V0bG9va19tYWlsT3B0aW9ucy5zdWJqZWN0ID0gJ1VzZXIgSW5xdWlyeSc7XG4gIG91dGxvb2tfbWFpbE9wdGlvbnMuaHRtbCA9IGVtYWlsSHRtbDtcbiAgb3V0bG9va190cmFuc3BvcnRlci5zZW5kTWFpbChvdXRsb29rX21haWxPcHRpb25zKTtcbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgcmVzdWx0OiAnb2snIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBTZW5kRW1haWw7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJub2RlbWFpbGVyXCIpOyJdLCJzb3VyY2VSb290IjoiIn0=