{"version":3,"sources":["webpack:///./src/app/gifts-browse/browse.component.css","webpack:///./src/app/gifts-browse/browse.component.html","webpack:///./src/app/gifts-browse/browse.component.ts","webpack:///./src/app/gifts-browse/gifts-browse.module.ts"],"names":[],"mappings":"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","file":"gifts-browse-gifts-browse-module.js","sourcesContent":["module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2dpZnRzLWJyb3dzZS9icm93c2UuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<mat-drawer-container>\\r\\n  <mat-drawer mode=\\\"side\\\" opened>\\r\\n    <categories-tree></categories-tree>\\r\\n  </mat-drawer>\\r\\n  <mat-drawer-content>\\r\\n    <div class=\\\"container\\\">\\r\\n      <nav aria-label=\\\"breadcrumb\\\">\\r\\n        <ol class=\\\"breadcrumb\\\">\\r\\n          <li class=\\\"breadcrumb-item\\\"><a routerLink=\\\"/gifts/browse\\\">Home</a></li>\\r\\n          <li class=\\\"breadcrumb-item\\\" *ngFor=\\\"let item of categoryBreadcrumb; let i = index\\\" aria-current=\\\"page\\\">\\r\\n            <a (click)=\\\"onBreadcrumb(i)\\\">{{item}}</a>\\r\\n          </li>\\r\\n        </ol>\\r\\n      </nav>\\r\\n\\r\\n      <div class=\\\"py-5 px-3\\\">\\r\\n        <h1>\\r\\n          Product Catalog\\r\\n        </h1>\\r\\n        <div class='p-4'>\\r\\n          <mat-spinner *ngIf=\\\"!products\\\">Loading products.</mat-spinner>\\r\\n\\r\\n          <div class=\\\"card-group\\\">\\r\\n            <mat-card *ngFor=\\\"let product of products; let ind = index\\\" class=\\\"col-sm-6 col-md-4 col-lg-3\\\">\\r\\n              <a [routerLink]=\\\"['/gifts/view', {_id: product._id}]\\\">\\r\\n                <img *ngIf=\\\"product.img && product.img.length\\\" mat-card-image src=\\\"/assets/{{product.img[0]}}\\\" />\\r\\n              </a>\\r\\n              <mat-card-title>{{product.name}}</mat-card-title>\\r\\n              <mat-card-subtitle>\\r\\n                <div>{{product.price}}</div>\\r\\n              </mat-card-subtitle>\\r\\n              <mat-card-content>\\r\\n                <mat-form-field appearance=\\\"outline\\\" class=\\\"w-100\\\">\\r\\n                  <input matInput type=\\\"number\\\" step=\\\"1\\\" min=\\\"1\\\" [(ngModel)]=\\\"productCurrentQty[ind]\\\" />\\r\\n                </mat-form-field>\\r\\n                <button mat-raised-button color=\\\"primary\\\" class=\\\"w-100\\\" (click)=\\\"addToCart(ind)\\\">Add</button>\\r\\n                <!-- <button mat-raised-button (click)=\\\"updateInCart(ind)\\\">Update</button> -->\\r\\n              </mat-card-content>\\r\\n            </mat-card>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"bottom-right text-secondary\\\">\\r\\n        <i (click)=\\\"ScrollToTop()\\\" class='fa fa-chevron-circle-up fa-3x'></i>\\r\\n      </div>\\r\\n    </div>\\r\\n  </mat-drawer-content>\\r\\n</mat-drawer-container>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\nimport { Product, Category } from '../core/products-interface';\r\nimport { ProductsApiService } from '../core/services/products-api.service';\r\nimport { CartApiService } from '../core/services/cart-api.service';\r\n\r\n@Component({\r\n  selector: 'gifts-browse',\r\n  templateUrl: './browse.component.html',\r\n  styleUrls: ['./browse.component.css']\r\n})\r\nexport class BrowseComponent implements OnInit {\r\n  categoryBreadcrumb: string[];\r\n  products: Product[];\r\n  productCurrentQty: number[];\r\n\r\n  constructor(\r\n    private productsApiService: ProductsApiService,\r\n    private cartApiService: CartApiService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.categoryBreadcrumb = null;\r\n    this.products = null;\r\n    this.productCurrentQty = [];\r\n\r\n    this.activatedRoute.params.subscribe(p => {\r\n      this.refresh(p.category);\r\n    });\r\n  }\r\n\r\n  getProducts(category: string) {\r\n    this.productsApiService.getProducts(category).subscribe(\r\n      data => {\r\n        this.products = data;\r\n        this.productCurrentQty = [];\r\n        data.forEach(d => {\r\n          this.productCurrentQty.push(1);\r\n        });\r\n      },\r\n      err => {\r\n        console.log(err.error);\r\n      }\r\n    );\r\n  }\r\n\r\n  refresh(category: string) {\r\n    this.getProducts(category);\r\n    if (category) {\r\n      this.categoryBreadcrumb = category.split('/');\r\n      if (!this.categoryBreadcrumb[0]) {\r\n        this.categoryBreadcrumb.splice(0, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  onBreadcrumb(ind: number) {\r\n    let newCategory = '';\r\n    for (let i = 0; i <= ind; ++i) {\r\n      newCategory += '/' + this.categoryBreadcrumb[i];\r\n    }\r\n    console.log(newCategory);\r\n    return this.router.navigate(['/gifts/browse', { category: newCategory }]);\r\n  }\r\n\r\n  addToCart(i: number) {\r\n    this.cartApiService.addToCart(this.products[i], this.productCurrentQty[i]);\r\n  }\r\n\r\n  updateInCart(i: number) {\r\n    this.cartApiService.updateInCart(\r\n      this.products[i],\r\n      this.productCurrentQty[i]\r\n    );\r\n  }\r\n\r\n  ScrollToTop() {}\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { BrowseComponent } from './browse.component';\r\n\r\nconst giftsBrowseRoutes: Routes = [\r\n  { path: '', children: [{ path: '', component: BrowseComponent }] }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [BrowseComponent],\r\n  imports: [SharedModule, RouterModule.forChild(giftsBrowseRoutes)]\r\n})\r\nexport class GiftsBrowseModule {}\r\n"],"sourceRoot":""}